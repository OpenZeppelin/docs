---
title: "Finance"
description: "Smart contract finance utilities and implementations"
---

<Callout>
This document is better viewed at https://docs.openzeppelin.com/contracts/api/finance
</Callout>

This directory includes primitives for financial systems:

* [`PaymentSplitter`](#PaymentSplitter) allows to split Ether and ERC20 payments among a group of accounts. The sender does not need to be
  aware that the assets will be split in this way, since it is handled transparently by the contract. The split can be
  in equal parts or in any other arbitrary proportion.
* [`VestingWallet`](#VestingWallet) handles the vesting of Ether and ERC20 tokens for a given beneficiary. Custody of multiple tokens can
  be given to this contract, which will release the token to the beneficiary following a given, customizable, vesting
  schedule.

## Contracts

[`PaymentSplitter`](#PaymentSplitter)

[`VestingWallet`](#VestingWallet)

<a id="PaymentSplitter"></a>

## `PaymentSplitter` [üìÅ](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/v4.9.6/contracts/finance/PaymentSplitter.sol)

```solidity
import "@openzeppelin/contracts/finance/PaymentSplitter.sol";
```

This contract allows to split Ether payments among a group of accounts. The sender does not need to be aware
that the Ether will be split in this way, since it is handled transparently by the contract.

The split can be in equal parts or in any other arbitrary proportion. The way this is specified is by assigning each
account to a number of shares. Of all the Ether that this contract receives, each account will then be able to claim
an amount proportional to the percentage of total shares they were assigned. The distribution of shares is set at the
time of contract deployment and can't be updated thereafter.

`PaymentSplitter` follows a _pull payment_ model. This means that payments are not automatically forwarded to the
accounts but kept in this contract, and the actual transfer is triggered as a separate step by calling the [`PaymentSplitter.release`](#PaymentSplitter-release-contract-IERC20-address-)
function.

NOTE: This contract assumes that ERC20 tokens will behave similarly to native tokens (Ether). Rebasing tokens, and
tokens that apply fees during transfers, are likely to not be supported as expected. If in doubt, we encourage you
to run tests before sending real value to this contract.

### Functions
- [constructor(payees, shares_)](#PaymentSplitter-constructor-address---uint256---)
- [receive()](#PaymentSplitter-receive--)
- [totalShares()](#PaymentSplitter-totalShares--)
- [totalReleased()](#PaymentSplitter-totalReleased--)
- [totalReleased(token)](#PaymentSplitter-totalReleased-contract-IERC20-)
- [shares(account)](#PaymentSplitter-shares-address-)
- [released(account)](#PaymentSplitter-released-address-)
- [released(token, account)](#PaymentSplitter-released-contract-IERC20-address-)
- [payee(index)](#PaymentSplitter-payee-uint256-)
- [releasable(account)](#PaymentSplitter-releasable-address-)
- [releasable(token, account)](#PaymentSplitter-releasable-contract-IERC20-address-)
- [release(account)](#PaymentSplitter-release-address-payable-)
- [release(token, account)](#PaymentSplitter-release-contract-IERC20-address-)

### Events
- [PayeeAdded(account, shares)](#PaymentSplitter-PayeeAdded-address-uint256-)
- [PaymentReleased(to, amount)](#PaymentSplitter-PaymentReleased-address-uint256-)
- [ERC20PaymentReleased(token, to, amount)](#PaymentSplitter-ERC20PaymentReleased-contract-IERC20-address-uint256-)
- [PaymentReceived(from, amount)](#PaymentSplitter-PaymentReceived-address-uint256-)

<a id="PaymentSplitter-constructor-address---uint256---"></a>

### `constructor(address[] payees, uint256[] shares_)`
*public*

Creates an instance of `PaymentSplitter` where each account in `payees` is assigned the number of shares at
the matching position in the `shares` array.

All addresses in `payees` must be non-zero. Both arrays must have the same non-zero length, and there must be no
duplicates in `payees`.

<a id="PaymentSplitter-receive--"></a>

### `receive()`
*external*

The Ether received will be logged with [`PaymentSplitter.PaymentReceived`](#PaymentSplitter-PaymentReceived-address-uint256-) events. Note that these events are not fully
reliable: it's possible for a contract to receive Ether without triggering this function. This only affects the
reliability of the events, and not the actual splitting of Ether.

To learn more about this see the Solidity documentation for
[fallback
functions](https://solidity.readthedocs.io/en/latest/contracts.html#fallback-function).

<a id="PaymentSplitter-totalShares--"></a>

### `totalShares() ‚Üí uint256`
*public*

Getter for the total shares held by payees.

<a id="PaymentSplitter-totalReleased--"></a>

### `totalReleased() ‚Üí uint256`
*public*

Getter for the total amount of Ether already released.

<a id="PaymentSplitter-totalReleased-contract-IERC20-"></a>

### `totalReleased(contract IERC20 token) ‚Üí uint256`
*public*

Getter for the total amount of `token` already released. `token` should be the address of an IERC20
contract.

<a id="PaymentSplitter-shares-address-"></a>

### `shares(address account) ‚Üí uint256`
*public*

Getter for the amount of shares held by an account.

<a id="PaymentSplitter-released-address-"></a>

### `released(address account) ‚Üí uint256`
*public*

Getter for the amount of Ether already released to a payee.

<a id="PaymentSplitter-released-contract-IERC20-address-"></a>

### `released(contract IERC20 token, address account) ‚Üí uint256`
*public*

Getter for the amount of `token` tokens already released to a payee. `token` should be the address of an
IERC20 contract.

<a id="PaymentSplitter-payee-uint256-"></a>

### `payee(uint256 index) ‚Üí address`
*public*

Getter for the address of the payee number `index`.

<a id="PaymentSplitter-releasable-address-"></a>

### `releasable(address account) ‚Üí uint256`
*public*

Getter for the amount of payee's releasable Ether.

<a id="PaymentSplitter-releasable-contract-IERC20-address-"></a>

### `releasable(contract IERC20 token, address account) ‚Üí uint256`
*public*

Getter for the amount of payee's releasable `token` tokens. `token` should be the address of an
IERC20 contract.

<a id="PaymentSplitter-release-address-payable-"></a>

### `release(address payable account)`
*public*

Triggers a transfer to `account` of the amount of Ether they are owed, according to their percentage of the
total shares and their previous withdrawals.

<a id="PaymentSplitter-release-contract-IERC20-address-"></a>

### `release(contract IERC20 token, address account)`
*public*

Triggers a transfer to `account` of the amount of `token` tokens they are owed, according to their
percentage of the total shares and their previous withdrawals. `token` must be the address of an IERC20
contract.

<a id="PaymentSplitter-PayeeAdded-address-uint256-"></a>

### `PayeeAdded(address account, uint256 shares)`
*event*

<a id="PaymentSplitter-PaymentReleased-address-uint256-"></a>

### `PaymentReleased(address to, uint256 amount)`
*event*

<a id="PaymentSplitter-ERC20PaymentReleased-contract-IERC20-address-uint256-"></a>

### `ERC20PaymentReleased(contract IERC20 indexed token, address to, uint256 amount)`
*event*

<a id="PaymentSplitter-PaymentReceived-address-uint256-"></a>

### `PaymentReceived(address from, uint256 amount)`
*event*

<a id="VestingWallet"></a>

## `VestingWallet` [üìÅ](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/v4.9.6/contracts/finance/VestingWallet.sol)

```solidity
import "@openzeppelin/contracts/finance/VestingWallet.sol";
```

This contract handles the vesting of Eth and ERC20 tokens for a given beneficiary. Custody of multiple tokens
can be given to this contract, which will release the token to the beneficiary following a given vesting schedule.
The vesting schedule is customizable through the [`VestingWallet.vestedAmount`](#VestingWallet-vestedAmount-address-uint64-) function.

Any token transferred to this contract will follow the vesting schedule as if they were locked from the beginning.
Consequently, if the vesting has already started, any amount of tokens sent to this contract will (at least partly)
be immediately releasable.

### Functions
- [constructor(beneficiaryAddress, startTimestamp, durationSeconds)](#VestingWallet-constructor-address-uint64-uint64-)
- [receive()](#VestingWallet-receive--)
- [beneficiary()](#VestingWallet-beneficiary--)
- [start()](#VestingWallet-start--)
- [duration()](#VestingWallet-duration--)
- [released()](#VestingWallet-released--)
- [released(token)](#VestingWallet-released-address-)
- [releasable()](#VestingWallet-releasable--)
- [releasable(token)](#VestingWallet-releasable-address-)
- [release()](#VestingWallet-release--)
- [release(token)](#VestingWallet-release-address-)
- [vestedAmount(timestamp)](#VestingWallet-vestedAmount-uint64-)
- [vestedAmount(token, timestamp)](#VestingWallet-vestedAmount-address-uint64-)
- [_vestingSchedule(totalAllocation, timestamp)](#VestingWallet-_vestingSchedule-uint256-uint64-)

### Events
- [EtherReleased(amount)](#VestingWallet-EtherReleased-uint256-)
- [ERC20Released(token, amount)](#VestingWallet-ERC20Released-address-uint256-)

<a id="VestingWallet-constructor-address-uint64-uint64-"></a>

### `constructor(address beneficiaryAddress, uint64 startTimestamp, uint64 durationSeconds)`
*public*

Set the beneficiary, start timestamp and vesting duration of the vesting wallet.

<a id="VestingWallet-receive--"></a>

### `receive()`
*external*

The contract should be able to receive Eth.

<a id="VestingWallet-beneficiary--"></a>

### `beneficiary() ‚Üí address`
*public*

Getter for the beneficiary address.

<a id="VestingWallet-start--"></a>

### `start() ‚Üí uint256`
*public*

Getter for the start timestamp.

<a id="VestingWallet-duration--"></a>

### `duration() ‚Üí uint256`
*public*

Getter for the vesting duration.

<a id="VestingWallet-released--"></a>

### `released() ‚Üí uint256`
*public*

Amount of eth already released

<a id="VestingWallet-released-address-"></a>

### `released(address token) ‚Üí uint256`
*public*

Amount of token already released

<a id="VestingWallet-releasable--"></a>

### `releasable() ‚Üí uint256`
*public*

Getter for the amount of releasable eth.

<a id="VestingWallet-releasable-address-"></a>

### `releasable(address token) ‚Üí uint256`
*public*

Getter for the amount of releasable `token` tokens. `token` should be the address of an
IERC20 contract.

<a id="VestingWallet-release--"></a>

### `release()`
*public*

Release the native token (ether) that have already vested.

Emits a [`VestingWallet.EtherReleased`](#VestingWallet-EtherReleased-uint256-) event.

<a id="VestingWallet-release-address-"></a>

### `release(address token)`
*public*

Release the tokens that have already vested.

Emits a [`VestingWallet.ERC20Released`](#VestingWallet-ERC20Released-address-uint256-) event.

<a id="VestingWallet-vestedAmount-uint64-"></a>

### `vestedAmount(uint64 timestamp) ‚Üí uint256`
*public*

Calculates the amount of ether that has already vested. Default implementation is a linear vesting curve.

<a id="VestingWallet-vestedAmount-address-uint64-"></a>

### `vestedAmount(address token, uint64 timestamp) ‚Üí uint256`
*public*

Calculates the amount of tokens that has already vested. Default implementation is a linear vesting curve.

<a id="VestingWallet-_vestingSchedule-uint256-uint64-"></a>

### `_vestingSchedule(uint256 totalAllocation, uint64 timestamp) ‚Üí uint256`
*internal*

Virtual implementation of the vesting formula. This returns the amount vested, as a function of time, for
an asset given its total historical allocation.

<a id="VestingWallet-EtherReleased-uint256-"></a>

### `EtherReleased(uint256 amount)`
*event*

<a id="VestingWallet-ERC20Released-address-uint256-"></a>

### `ERC20Released(address indexed token, uint256 amount)`
*event*

