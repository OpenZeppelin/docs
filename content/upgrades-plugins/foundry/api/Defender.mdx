---
title: "Defender"
description: "Smart contract Defender utilities and implementations"
---

<a id="Defender"></a>

<div style={{marginTop: "4em"}} className="w-full flex flex-row items-center justify-between">

## `Defender` 

<a target="_blank" style={{marginTop: "1.5em"}} href="https://github.com/OpenZeppelin/openzeppelin-foundry-upgrades/blob/v0.4.0/src/Defender.sol">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github-icon lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></svg>
</a>

</div>

```solidity
import { Defender } from "openzeppelin-foundry-upgrades/Defender.sol";
```

Library for interacting with OpenZeppelin Defender from Forge scripts or tests.

<div className="bg-secondary p-4 rounded-md mb-6">
<h3 style={{ marginTop: "0"}}>Functions</h3>
<div className="font-mono">
- [deployContract(contractName)](#Defender-deployContract-string-)
- [deployContract(contractName, defenderOpts)](#Defender-deployContract-string-struct-DefenderOptions-)
- [deployContract(contractName, constructorData)](#Defender-deployContract-string-bytes-)
- [deployContract(contractName, constructorData, defenderOpts)](#Defender-deployContract-string-bytes-struct-DefenderOptions-)
- [proposeUpgrade(proxyAddress, newImplementationContractName, opts)](#Defender-proposeUpgrade-address-string-struct-Options-)
- [getDeployApprovalProcess()](#Defender-getDeployApprovalProcess--)
- [getUpgradeApprovalProcess()](#Defender-getUpgradeApprovalProcess--)
</div>
</div>

<a id="Defender-deployContract-string-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">deployContract(string contractName) → address</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">internal</p>
<a className="peer" data-card href="Defender-deployContract-string-">#</a>
</div>
</div>
<div className="px-4">

Deploys a contract to the current network using OpenZeppelin Defender.

<Callout type="warn">
Do not use this function directly if you are deploying an upgradeable contract. This function does not validate whether the contract is upgrade safe.
</Callout>

NOTE: If using an EOA or Safe to deploy, go to [Defender deploy](https://defender.openzeppelin.com/v2/#/deploy) to submit the pending deployment while the script is running.
The script waits for the deployment to complete before it continues.

</div>
</div>

<a id="Defender-deployContract-string-struct-DefenderOptions-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">deployContract(string contractName, struct DefenderOptions defenderOpts) → address</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">internal</p>
<a className="peer" data-card href="Defender-deployContract-string-struct-DefenderOptions-">#</a>
</div>
</div>
<div className="px-4">

Deploys a contract to the current network using OpenZeppelin Defender.

<Callout type="warn">
Do not use this function directly if you are deploying an upgradeable contract. This function does not validate whether the contract is upgrade safe.
</Callout>

NOTE: If using an EOA or Safe to deploy, go to [Defender deploy](https://defender.openzeppelin.com/v2/#/deploy) to submit the pending deployment while the script is running.
The script waits for the deployment to complete before it continues.

</div>
</div>

<a id="Defender-deployContract-string-bytes-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">deployContract(string contractName, bytes constructorData) → address</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">internal</p>
<a className="peer" data-card href="Defender-deployContract-string-bytes-">#</a>
</div>
</div>
<div className="px-4">

Deploys a contract with constructor arguments to the current network using OpenZeppelin Defender.

<Callout type="warn">
Do not use this function directly if you are deploying an upgradeable contract. This function does not validate whether the contract is upgrade safe.
</Callout>

NOTE: If using an EOA or Safe to deploy, go to [Defender deploy](https://defender.openzeppelin.com/v2/#/deploy) to submit the pending deployment while the script is running.
The script waits for the deployment to complete before it continues.

</div>
</div>

<a id="Defender-deployContract-string-bytes-struct-DefenderOptions-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">deployContract(string contractName, bytes constructorData, struct DefenderOptions defenderOpts) → address</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">internal</p>
<a className="peer" data-card href="Defender-deployContract-string-bytes-struct-DefenderOptions-">#</a>
</div>
</div>
<div className="px-4">

Deploys a contract with constructor arguments to the current network using OpenZeppelin Defender.

<Callout type="warn">
Do not use this function directly if you are deploying an upgradeable contract. This function does not validate whether the contract is upgrade safe.
</Callout>

NOTE: If using an EOA or Safe to deploy, go to [Defender deploy](https://defender.openzeppelin.com/v2/#/deploy) to submit the pending deployment while the script is running.
The script waits for the deployment to complete before it continues.

</div>
</div>

<a id="Defender-proposeUpgrade-address-string-struct-Options-"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">proposeUpgrade(address proxyAddress, string newImplementationContractName, struct Options opts) → struct ProposeUpgradeResponse</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">internal</p>
<a className="peer" data-card href="Defender-proposeUpgrade-address-string-struct-Options-">#</a>
</div>
</div>
<div className="px-4">

Proposes an upgrade to an upgradeable proxy using OpenZeppelin Defender.

This function validates a new implementation contract in comparison with a reference contract, deploys the new implementation contract using Defender,
and proposes an upgrade to the new implementation contract using an upgrade approval process on Defender.

Supported for UUPS or Transparent proxies. Not currently supported for beacon proxies or beacons.
For beacons, use `Upgrades.prepareUpgrade` along with a transaction proposal on Defender to upgrade the beacon to the deployed implementation.

Requires that either the `referenceContract` option is set, or the contract has a `@custom:oz-upgrades-from <reference>` annotation.

<Callout type="warn">
Ensure that the reference contract is the same as the current implementation contract that the proxy is pointing to.
This function does not validate that the reference contract is the current implementation.
</Callout>

NOTE: If using an EOA or Safe to deploy, go to [Defender deploy](https://defender.openzeppelin.com/v2/#/deploy) to submit the pending deployment of the new implementation contract while the script is running.
The script waits for the deployment to complete before it continues.

</div>
</div>

<a id="Defender-getDeployApprovalProcess--"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">getDeployApprovalProcess() → struct ApprovalProcessResponse</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">internal</p>
<a className="peer" data-card href="Defender-getDeployApprovalProcess--">#</a>
</div>
</div>
<div className="px-4">

Gets the default deploy approval process configured for your deployment environment on OpenZeppelin Defender.

</div>
</div>

<a id="Defender-getUpgradeApprovalProcess--"></a>

<div className="border rounded-md mb-4">
<div className="bg-secondary flex w-full justify-between px-4">
<p className="font-bold text-sm font-mono">getUpgradeApprovalProcess() → struct ApprovalProcessResponse</p>
<div className="flex flex-row items-center gap-2">
<p className="font-light text-sm">internal</p>
<a className="peer" data-card href="Defender-getUpgradeApprovalProcess--">#</a>
</div>
</div>
<div className="px-4">

Gets the default upgrade approval process configured for your deployment environment on OpenZeppelin Defender.
For example, this is useful for determining the default multisig wallet that you can use in your scripts to assign as the owner of your proxy.

</div>
</div>

<a id="ProposeUpgradeResponse"></a>

<div style={{marginTop: "4em"}} className="w-full flex flex-row items-center justify-between">

## `ProposeUpgradeResponse` 

<a target="_blank" style={{marginTop: "1.5em"}} href="https://github.com/OpenZeppelin/openzeppelin-foundry-upgrades/blob/v0.4.0/src/Defender.sol">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github-icon lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></svg>
</a>

</div>

```solidity
import { ProposeUpgradeResponse } from "openzeppelin-foundry-upgrades/Defender.sol";
```

<a id="ApprovalProcessResponse"></a>

<div style={{marginTop: "4em"}} className="w-full flex flex-row items-center justify-between">

## `ApprovalProcessResponse` 

<a target="_blank" style={{marginTop: "1.5em"}} href="https://github.com/OpenZeppelin/openzeppelin-foundry-upgrades/blob/v0.4.0/src/Defender.sol">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github-icon lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></svg>
</a>

</div>

```solidity
import { ApprovalProcessResponse } from "openzeppelin-foundry-upgrades/Defender.sol";
```

