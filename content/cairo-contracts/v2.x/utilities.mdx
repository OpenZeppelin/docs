---
title: Utilities
description: Utilities
---

This crate provides miscellaneous components and libraries containing utility functions to handle common tasks.

## Core

### `++utils++`

```rust
use openzeppelin_utils;
```

Module containing core utilities of the library.

**Members**

**Inner modules**

* [`+cryptography+`](#`[.contract-item-name]#++cryptography++#`-[.item-kind]#module#)
* [`+deployments+`](#`[.contract-item-name]#++deployments++#`-[.item-kind]#module#)
* [`+math+`](#`[.contract-item-name]#++math++#`-[.item-kind]#module#)
* [`+contract_clock+`](#`[.contract-item-name]#++contract_clock++#`-[.item-kind]#module#)
* [`+serde+`](#`[.contract-item-name]#++serde++#`-[.item-kind]#module#)

#### Inner modules

#### `[.contract-item-name]#++cryptography++#` [.item-kind]#module#

See [`openzeppelin_utils::cryptography`](#`++cryptography++`).

#### `[.contract-item-name]#++deployments++#` [.item-kind]#module#

See [`openzeppelin_utils::deployments`](#`++deployments++`).

#### `[.contract-item-name]#++math++#` [.item-kind]#module#

See [`openzeppelin_utils::math`](#`++math++`).

#### `[.contract-item-name]#++contract_clock++#` [.item-kind]#module#

See [`openzeppelin_utils::contract_clock`](#`++contract_clock++`).

#### `[.contract-item-name]#++serde++#` [.item-kind]#module#

See [`openzeppelin_utils::serde`](#`++serde++`).

### `++cryptography++`

```rust
use openzeppelin_utils::cryptography;
```

Module containing utilities related to cryptography.

**Members**

**Inner modules**

* [`+nonces+`](#`[.contract-item-name]#++nonces++#`-[.item-kind]#module#)
* [`+snip12+`](#`[.contract-item-name]#++snip12++#`-[.item-kind]#module#)

#### Inner modules

#### `[.contract-item-name]#++nonces++#` [.item-kind]#module#

See [`openzeppelin_utils::cryptography::nonces::NoncesComponent`](#`++noncescomponent++`).

#### `[.contract-item-name]#++snip12++#` [.item-kind]#module#

See [`openzeppelin_utils::cryptography::snip12`](#`++snip12++`).

### `++deployments++`

```rust
use openzeppelin_utils::deployments;
```

Module containing utility functions for calculating contract addresses through [deploy_syscall](https://docs.starknet.io/architecture-and-concepts/smart-contracts/system-calls-cairo1/#deploy) and the [Universal Deployer Contract](/udc.adoc) (UDC).

**Members**

**Structs**

* [`+DeployerInfo(caller_address, udc_address)+`](#`[.contract-item-name]#++deployerinfo++#++(caller_address:-contractaddress,-udc_address:-contractaddress)++`-[.item-kind]#struct#)

**Functions**

* [`+calculate_contract_address_from_deploy_syscall(salt, class_hash, constructor_calldata, deployer_address)+`](#`[.contract-item-name]#++calculate_contract_address_from_deploy_syscall++#++(salt:-felt252,-class_hash:-classhash,-constructor_calldata:-span<felt252>,-deployer_address:-contractaddress)-→-contractaddress++`-[.item-kind]#function#)
* [`+compute_hash_on_elements(data)+`](#`[.contract-item-name]#++compute_hash_on_elements++#++(data:-span<felt252>)-→-felt252++`-[.item-kind]#function#)
* [`+calculate_contract_address_from_udc(salt, class_hash, constructor_calldata, deployer_info)+`](#`[.contract-item-name]#++calculate_contract_address_from_udc++#++(salt:-felt252,-class_hash:-classhash,-constructor_calldata:-span<felt252>,-deployer_info:-option<deployerinfo>)-→-contractaddress++`-[.item-kind]#function#)

#### Structs

#### `[.contract-item-name]#++DeployerInfo++#++(caller_address: ContractAddress, udc_address: ContractAddress)++` [.item-kind]#struct#

Struct containing arguments necessary in [utils::calculate_contract_address_from_udc](#`[.contract-item-name]#++calculate_contract_address_from_udc++#++(salt:-felt252,-class_hash:-classhash,-constructor_calldata:-span<felt252>,-deployer_info:-option<deployerinfo>)-→-contractaddress++`-[.item-kind]#function#) for origin-dependent deployment calculations.

#### Functions

#### `[.contract-item-name]#++calculate_contract_address_from_deploy_syscall++#++(salt: felt252, class_hash: ClassHash, constructor_calldata: Span<felt252>, deployer_address: ContractAddress) → ContractAddress++` [.item-kind]#function#

Returns the contract address when passing the given arguments to [deploy_syscall](https://docs.starknet.io/architecture-and-concepts/smart-contracts/system-calls-cairo1/#deploy).

#### `[.contract-item-name]#++compute_hash_on_elements++#++(data: Span<felt252>) → felt252++` [.item-kind]#function#

Creates a Pedersen hash chain with the elements of `data` and returns the finalized hash.

#### `[.contract-item-name]#++calculate_contract_address_from_udc++#++(salt: felt252, class_hash: ClassHash, constructor_calldata: Span<felt252>, deployer_info: Option<DeployerInfo>) → ContractAddress++` [.item-kind]#function#

Returns the calculated contract address for UDC deployments.

Origin-independent deployments (deployed from zero) should pass `Option::None` as `deployer_info`.

Origin-dependent deployments hash `salt` with `caller_address` (member of [DeployerInfo](#`[.contract-item-name]#++deployerinfo++#++(caller_address:-contractaddress,-udc_address:-contractaddress)++`-[.item-kind]#struct#)) and pass the hashed salt to the inner [deploy_syscall](https://docs.starknet.io/architecture-and-concepts/smart-contracts/system-calls-cairo1/#deploy) as the `contract_address_salt` argument.

### `++math++`

```rust
use openzeppelin_utils::math;
```

Module containing math utilities.

**Members**

**Functions**

* [`+average(a, b)+`](#`[.contract-item-name]#++average++#++(a:-t,-b:-t)-→-t++`-[.item-kind]#function#)

#### Functions

#### `[.contract-item-name]#++average++#++(a: T, b: T) → T++` [.item-kind]#function#

Returns the average of two unsigned integers. The result is rounded down.

<Callout>
`T` is a generic value matching different numeric implementations.
</Callout>

### `++contract_clock++`

```rust
use openzeppelin_utils::contract_clock;
```

Module providing a trait for the [EIP-6372](https://eips.ethereum.org/EIPS/eip-6372) standard along with default clock implementations based on either block number or block timestamp.

**Traits**

* [`+ERC6372Clock+`](#`++erc6372clock++`-link:https://github.com/openzeppelin/cairo-contracts/blob/votes-erc6372/packages/utils/src/contract_clock.cairo[{github-icon},role=heading-link])

**Implementations**

* [`+ERC6372BlockNumberClock+`](#`[.contract-item-name]#++erc6372blocknumberclock++#`-[.item-kind]#impl#)
* [`+ERC6372TimestampClock+`](#`[.contract-item-name]#++erc6372timestampclock++#`-[.item-kind]#impl#)

#### `++ERC6372Clock++` link:https://github.com/OpenZeppelin/cairo-contracts/blob/votes-erc6372/packages/utils/src/contract_clock.cairo[{github-icon},role=heading-link]

```rust
use openzeppelin_utils::contract_clock::ERC6372Clock;
```

A trait for the [EIP-6372](https://eips.ethereum.org/EIPS/eip-6372) standard that allows flexible internal clock implementation — based on block timestamp, block number, or a custom logic.

**Functions**

* [`+clock()+`](#`[.contract-item-name]#++clock++#++()-→-u64++`-[.item-kind]#external#)
* [`+CLOCK_MODE()+`](#`[.contract-item-name]#++clock_mode++#++()-→-bytearray++`-[.item-kind]#external#)

#### Functions

#### `[.contract-item-name]#++clock++#++() → u64++` [.item-kind]#external#

Returns the current timepoint determined by the contract’s operational mode, intended for use in time-sensitive logic.

Requirements:

* This function MUST always be non-decreasing.

#### `[.contract-item-name]#++CLOCK_MODE++#++() → ByteArray++` [.item-kind]#external#

Returns a description of the clock the contract is operating in.

Requirements:

* The output MUST be formatted like a URL query string, decodable in standard JavaScript.

#### Implementations

#### `[.contract-item-name]#++ERC6372BlockNumberClock++#` [.item-kind]#impl#

Implementation of the `ERC6372Clock` trait that uses the block number as its clock reference.

#### `[.contract-item-name]#++ERC6372TimestampClock++#` [.item-kind]#impl#

Implementation of the `ERC6372Clock` trait that uses the block timestamp as its clock reference.

### `++serde++`

```rust
use openzeppelin_utils::serde;
```

Module containing utilities related to serialization and deserialization of Cairo data structures.

**Members**

**Traits**

* [`+SerializedAppend+`](#`[.contract-item-name]#++serializedappend++#`-[.item-kind]#trait#)

#### Traits

#### `[.contract-item-name]#++SerializedAppend++#` [.item-kind]#trait#

Importing this trait allows the ability to append a serialized representation of a Cairo data structure already
implementing the `Serde` trait to a `felt252` buffer.

Usage example:

```rust
use openzeppelin_utils::serde::SerializedAppend;
use starknet::ContractAddress;

fn to_calldata(recipient: ContractAddress, amount: u256) -> Array<felt252> {
    let mut calldata = array![];
    calldata.append_serde(recipient);
    calldata.append_serde(amount);
    calldata
}
```

Note that the `append_serde` method is automatically available for arrays of felts, and it accepts any data structure
that implements the `Serde` trait.

## Cryptography

### `++NoncesComponent++`

```rust
use openzeppelin_utils::cryptography::nonces::NoncesComponent;
```

This component provides a simple mechanism for handling incremental
nonces for a set of addresses. It is commonly used to prevent replay attacks
when contracts accept signatures as input.

<a name="NoncesComponent-Embeddable-Impls"></a>**Embeddable Implementations**

* [`+nonces(self, owner)+`](#`[.contract-item-name]#++nonces++#++(self:-@contractstate,-owner:-contractaddress)-→-felt252++`-[.item-kind]#external#)

**Internal Implementations**

* [`+use_nonce(self, owner)+`](#`[.contract-item-name]#++use_nonce++#++(ref-self:-componentstate,-owner:-contractaddress)-→-felt252++`-[.item-kind]#internal#)
* [`+use_checked_nonce(self, owner, nonce)+`](#`[.contract-item-name]#++use_checked_nonce++#++(ref-self:-componentstate,-owner:-contractaddress,-nonce:-felt252)-→-felt252++`-[.item-kind]#internal#)

#### Embeddable functions

#### `[.contract-item-name]#++nonces++#++(self: @ContractState, owner: ContractAddress) → felt252++` [.item-kind]#external#

Returns the next unused nonce for an `owner`.

#### Internal functions

#### `[.contract-item-name]#++use_nonce++#++(ref self: ComponentState, owner: ContractAddress) → felt252++` [.item-kind]#internal#

Consumes a nonce, returns the current value, and increments nonce.

For each account, the nonce has an initial value of 0, can only be incremented by one, and cannot be
decremented or reset. This guarantees that the nonce never overflows.

#### `[.contract-item-name]#++use_checked_nonce++#++(ref self: ComponentState, owner: ContractAddress, nonce: felt252) → felt252++` [.item-kind]#internal#

Same as `use_nonce` but checking that `nonce` is the next valid one for `owner`.

### `++snip12++`

```rust
use openzeppelin_utils::snip12;
```

Supports on-chain generation of message hashes compliant with [SNIP12](https://github.com/starknet-io/SNIPs/blob/main/SNIPS/snip-12.md).

<Callout>
For a full walkthrough on how to use this module, see the
</Callout>
[SNIP12 and Typed Messages](/guides/snip12.adoc) guide.
