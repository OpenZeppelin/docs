---
title: Access Control
---

This crate provides ways to restrict who can access the functions of a contract or when they can do it.

- [Ownable](#OwnableComponent) is a simple mechanism with a single "owner" role that can be assigned to a single account. This mechanism can be useful in simple scenarios, but fine grained access needs are likely to outgrow it.
- [AccessControl](#AccessControlComponent) provides a general role based access control mechanism. Multiple hierarchical roles can be created and assigned each to multiple accounts.

## [](#interfaces)Interfaces

<Callout type='info'>
Starting from version `3.x.x`, the interfaces are no longer part of the `openzeppelin_access` package. The references documented here are contained in the `openzeppelin_interfaces` package version `v2.1.0`.
</Callout>

<APIGithubLinkHeader moduleName="IAccessControl" link="https://github.com/OpenZeppelin/cairo-contracts/blob/release-v3.0.0-alpha.1/packages/interfaces/src/access/accesscontrol.cairo" />

```rust
use openzeppelin_interfaces::accesscontrol::IAccessControl;
```

External interface of AccessControl.

[SRC5 ID](introspection#ISRC5)

0x23700be02858dbe2ac4dc9c9f66d0b6b0ed81ec7f970ca6844500a56ff61751

Functions

- [`has_role(role, account)`](#IAccessControl-has_role)
- [`get_role_admin(role)`](#IAccessControl-get_role_admin)
- [`grant_role(role, account)`](#IAccessControl-grant_role)
- [`revoke_role(role, account)`](#IAccessControl-revoke_role)
- [`renounce_role(role, account)`](#IAccessControl-renounce_role)

Events

- [`RoleAdminChanged(role, previous_admin_role, new_admin_role)`](#IAccessControl-RoleAdminChanged)
- [`RoleGranted(role, account, sender)`](#IAccessControl-RoleGranted)
- [`RoleRevoked(role, account, sender)`](#IAccessControl-RoleRevoked)

#### [](#IAccessControl-Functions)Functions

#### [](#IAccessControl-has_role)`has_role(role: felt252, account: ContractAddress) → bool` external

Returns whether `account` can act as `role`.

#### [](#IAccessControl-get_role_admin)`get_role_admin(role: felt252) → felt252` external

Returns the admin role that controls `role`. See [grant\_role](#IAccessControl-grant_role) and [revoke\_role](#IAccessControl-revoke_role).

To change a role’s admin, use [set\_role\_admin](#AccessControlComponent-set_role_admin).

#### [](#IAccessControl-grant_role)`grant_role(role: felt252, account: ContractAddress)` external

Grants `role` to `account`.

If `account` had not been already granted `role`, emits a [RoleGranted](#IAccessControl-RoleGranted) event.

Requirements:

- the caller must have `role`'s admin role.

#### [](#IAccessControl-revoke_role)`revoke_role(role: felt252, account: ContractAddress)` external

Revokes `role` from `account`.

If `account` had been granted `role`, emits a [RoleRevoked](#IAccessControl-RoleRevoked) event.

Requirements:

- the caller must have `role`'s admin role.

#### [](#IAccessControl-renounce_role)`renounce_role(role: felt252, account: ContractAddress)` external

Revokes `role` from the calling account.

Roles are often managed via [grant\_role](#IAccessControl-grant_role) and [revoke\_role](#IAccessControl-revoke_role). This function’s purpose is to provide a mechanism for accounts to lose their privileges if they are compromised (such as when a trusted device is misplaced).

If the calling account had been granted `role`, emits a [RoleRevoked](#IAccessControl-RoleRevoked) event.

Requirements:

- the caller must be `account`.

#### [](#IAccessControl-Events)Events

#### [](#IAccessControl-RoleAdminChanged)`RoleAdminChanged(role: felt252, previous_admin_role: ContractAddress, new_admin_role: ContractAddress)` event

Emitted when `new_admin_role` is set as `role`'s admin role, replacing `previous_admin_role`

`DEFAULT_ADMIN_ROLE` is the starting admin for all roles, despite [RoleAdminChanged](#IAccessControl-RoleAdminChanged) not being emitted signaling this.

#### [](#IAccessControl-RoleGranted)`RoleGranted(role: felt252, account: ContractAddress, sender: ContractAddress)` event

Emitted when `account` is granted `role`.

`sender` is the account that originated the contract call, an account with the admin role or the deployer address if `_grant_role` is called from the constructor.

#### [](#IAccessControl-RoleRevoked)`RoleRevoked(role: felt252, account: ContractAddress, sender: ContractAddress)` event

Emitted when `account` is revoked `role`.

`sender` is the account that originated the contract call:

- if using `revoke_role`, it is the admin role bearer.
- if using `renounce_role`, it is the role bearer (i.e. `account`).

### [](#IAccessControlWithDelay)`IAccessControlWithDelay`[](https://github.com/OpenZeppelin/cairo-contracts/blob/release-v3.0.0-alpha.1/packages/interfaces/src/access/accesscontrol.cairo)

```rust
use openzeppelin_interfaces::accesscontrol::IAccessControlWithDelay;
```

External interface for the extended `AccessControlWithDelay` functionality.

Functions

- [`get_role_status(role, account)`](#IAccessControlWithDelay-get_role_status)
- [`grant_role_with_delay(role, account, delay)`](#IAccessControlWithDelay-grant_role_with_delay)

Events

- [`RoleGrantedWithDelay(role, account, sender, delay)`](#IAccessControlWithDelay-RoleGrantedWithDelay)

#### [](#IAccessControlWithDelay-Functions)Functions

#### [](#IAccessControlWithDelay-get_role_status)`get_role_status(role: felt252, account: ContractAddress) → RoleStatus` external

Returns the account’s status for the given role. The possible statuses are:

- `NotGranted`: the role has not been granted to the account.
- `Delayed`: The role has been granted to the account but is not yet active due to a time delay.
- `Effective`: the role has been granted to the account and is currently active.

#### [](#IAccessControlWithDelay-grant_role_with_delay)`grant_role_with_delay(role: felt252, account: ContractAddress, delay: u64)` external

Attempts to grant `role` to `account` with the specified activation delay.

Requirements:

- The caller must have `role`'s admin role.
- delay must be greater than 0.
- the `role` must not be already effective for `account`.

May emit a [RoleGrantedWithDelay](#IAccessControlWithDelay-RoleGrantedWithDelay) event.

#### [](#IAccessControlWithDelay-Events)Events

#### [](#IAccessControlWithDelay-RoleGrantedWithDelay)`RoleGrantedWithDelay(role: felt252, account: ContractAddress, sender: ContractAddress, delay: u64)` event

Emitted when `account` is granted `role` with a delay.

`sender` is the account that originated the contract call, an account with the admin role or the deployer address if [\_grant\_role\_with\_delay](#AccessControlComponent-_grant_role_with_delay) is called from the constructor.

### [](#IAccessControlDefaultAdminRules)`IAccessControlDefaultAdminRules`[](https://github.com/OpenZeppelin/cairo-contracts/blob/release-v3.0.0-alpha.1/packages/interfaces/src/access/accesscontrol_default_admin_rules.cairo)

```rust
use openzeppelin_interfaces::accesscontrol_default_admin_rules::IAccessControlDefaultAdminRules;
```

External interface of AccessControlDefaultAdminRules declared to support [SRC5](https://github.com/starknet-io/SNIPs/blob/main/SNIPS/snip-5.md) detection.

[SRC5 ID](introspection#ISRC5)

0x3509b3083c9586afe5dae781146b0608c3846870510f8d4d21ae38676cc33eb

Functions

- [`default_admin()`](#IAccessControlDefaultAdminRules-default_admin)
- [`pending_default_admin()`](#IAccessControlDefaultAdminRules-pending_default_admin)
- [`default_admin_delay()`](#IAccessControlDefaultAdminRules-default_admin_delay)
- [`pending_default_admin_delay()`](#IAccessControlDefaultAdminRules-pending_default_admin_delay)
- [`begin_default_admin_transfer(new_admin)`](#IAccessControlDefaultAdminRules-begin_default_admin_transfer)
- [`cancel_default_admin_transfer()`](#IAccessControlDefaultAdminRules-cancel_default_admin_transfer)
- [`accept_default_admin_transfer()`](#IAccessControlDefaultAdminRules-accept_default_admin_transfer)
- [`change_default_admin_delay(new_delay)`](#IAccessControlDefaultAdminRules-change_default_admin_delay)
- [`rollback_default_admin_delay()`](#IAccessControlDefaultAdminRules-rollback_default_admin_delay)
- [`default_admin_delay_increase_wait()`](#IAccessControlDefaultAdminRules-default_admin_delay_increase_wait)

Events

- [`DefaultAdminTransferScheduled(new_admin, accept_schedule)`](#IAccessControlDefaultAdminRules-DefaultAdminTransferScheduled)
- [`DefaultAdminTransferCanceled()`](#IAccessControlDefaultAdminRules-DefaultAdminTransferCanceled)
- [`DefaultAdminDelayChangeScheduled(new_delay, effect_schedule)`](#IAccessControlDefaultAdminRules-DefaultAdminDelayChangeScheduled)
- [`DefaultAdminDelayChangeCanceled()`](#IAccessControlDefaultAdminRules-DefaultAdminDelayChangeCanceled)

#### [](#IAccessControlDefaultAdminRules-Functions)Functions

#### [](#IAccessControlDefaultAdminRules-default_admin)`default_admin() → ContractAddress` external

Returns the address of the current `DEFAULT_ADMIN_ROLE` holder.

#### [](#IAccessControlDefaultAdminRules-pending_default_admin)`pending_default_admin() → (ContractAddress, u64)` external

Returns a tuple of a `new_admin` and an `accept_schedule`.

After the `accept_schedule` passes, the `new_admin` will be able to accept the `default_admin` role by calling [accept\_default\_admin\_transfer](#IAccessControlDefaultAdminRules-accept_default_admin_transfer), completing the role transfer.

A zero value only in `accept_schedule` indicates no pending admin transfer.

A zero address `new_admin` means that `default_admin` is being renounced.

#### [](#IAccessControlDefaultAdminRules-default_admin_delay)`default_admin_delay() → u64` external

Returns the delay required to schedule the acceptance of a `default_admin` transfer started.

This delay will be added to the current timestamp when calling [begin\_default\_admin\_transfer](#IAccessControlDefaultAdminRules-begin_default_admin_transfer) to set the acceptance schedule.

If a delay change has been scheduled, it will take effect as soon as the schedule passes, making this function return the new delay.

See [change\_default\_admin\_delay](#IAccessControlDefaultAdminRules-change_default_admin_delay).

#### [](#IAccessControlDefaultAdminRules-pending_default_admin_delay)`pending_default_admin_delay() → (u64, u64)` external

Returns a tuple of `new_delay` and an `effect_schedule`.

After the `effect_schedule` passes, the `new_delay` will get into effect immediately for every new `default_admin` transfer started with [begin\_default\_admin\_transfer](#IAccessControlDefaultAdminRules-begin_default_admin_transfer).

A zero value only in `effect_schedule` indicates no pending delay change.

A zero value only for `new_delay` means that the next [default\_admin\_delay](#IAccessControlDefaultAdminRules-default_admin_delay) will be zero after the effect schedule.

#### [](#IAccessControlDefaultAdminRules-begin_default_admin_transfer)`begin_default_admin_transfer(new_admin)` external

Starts a `default_admin` transfer by setting a [pending\_default\_admin](#IAccessControlDefaultAdminRules-pending_default_admin) scheduled for acceptance after the current timestamp plus a [default\_admin\_delay](#IAccessControlDefaultAdminRules-default_admin_delay).

Requirements:

- Only can be called by the current `default_admin`.

Emits a [DefaultAdminTransferScheduled](#IAccessControlDefaultAdminRules-DefaultAdminTransferScheduled) event.

#### [](#IAccessControlDefaultAdminRules-cancel_default_admin_transfer)`cancel_default_admin_transfer()` external

Cancels a `default_admin` transfer previously started with [begin\_default\_admin\_transfer](#IAccessControlDefaultAdminRules-begin_default_admin_transfer).

A [pending\_default\_admin](#IAccessControlDefaultAdminRules-pending_default_admin) not yet accepted can also be cancelled with this function.

Requirements:

- Only can be called by the current `default_admin`.

May emit a [DefaultAdminTransferCanceled](#IAccessControlDefaultAdminRules-DefaultAdminTransferCanceled) event.

#### [](#IAccessControlDefaultAdminRules-accept_default_admin_transfer)`accept_default_admin_transfer()` external

Completes a `default_admin` transfer previously started with [begin\_default\_admin\_transfer](#IAccessControlDefaultAdminRules-begin_default_admin_transfer).

After calling the function:

- `DEFAULT_ADMIN_ROLE` must be granted to the caller.
- `DEFAULT_ADMIN_ROLE` must be revoked from the previous holder.
- [pending\_default\_admin](#IAccessControlDefaultAdminRules-pending_default_admin) must be reset to zero value.

Requirements:

- Only can be called by the [pending\_default\_admin](#IAccessControlDefaultAdminRules-pending_default_admin)'s `new_admin`.
- The [pending\_default\_admin](#IAccessControlDefaultAdminRules-pending_default_admin)'s `accept_schedule` should’ve passed.

#### [](#IAccessControlDefaultAdminRules-change_default_admin_delay)`change_default_admin_delay(new_delay)` external

Initiates a [default\_admin\_delay](#IAccessControlDefaultAdminRules-default_admin_delay) update by setting a [pending\_default\_admin\_delay](#IAccessControlDefaultAdminRules-pending_default_admin_delay) scheduled to take effect after the current timestamp plus a [default\_admin\_delay](#IAccessControlDefaultAdminRules-default_admin_delay).

This function guarantees that any call to [begin\_default\_admin\_transfer](#IAccessControlDefaultAdminRules-begin_default_admin_transfer) done between the timestamp this method is called and the [pending\_default\_admin\_delay](#IAccessControlDefaultAdminRules-pending_default_admin_delay) effect schedule will use the current [default\_admin\_delay](#IAccessControlDefaultAdminRules-default_admin_delay) set before calling.

The [pending\_default\_admin\_delay](#IAccessControlDefaultAdminRules-pending_default_admin_delay)'s effect schedule is defined in a way that waiting until the schedule and then calling [begin\_default\_admin\_transfer](#IAccessControlDefaultAdminRules-begin_default_admin_transfer) with the new delay will take at least the same as another `default_admin` complete transfer (including acceptance).

The schedule is designed for two scenarios:

- When the delay is changed for a larger one the schedule is `block.timestamp + new delay` capped by [default\_admin\_delay\_increase\_wait](#IAccessControlDefaultAdminRules-default_admin_delay_increase_wait).
- When the delay is changed for a shorter one, the schedule is `block.timestamp + (current delay - new delay)`.

A [pending\_default\_admin\_delay](#IAccessControlDefaultAdminRules-pending_default_admin_delay) that never got into effect will be canceled in favor of a new scheduled change.

Requirements:

- Only can be called by the current `default_admin`.

Emits a [DefaultAdminDelayChangeScheduled](#IAccessControlDefaultAdminRules-DefaultAdminDelayChangeScheduled) event and may emit a [DefaultAdminDelayChangeCanceled](#IAccessControlDefaultAdminRules-DefaultAdminDelayChangeCanceled) event.

#### [](#IAccessControlDefaultAdminRules-rollback_default_admin_delay)`rollback_default_admin_delay()` external

Cancels a scheduled [default\_admin\_delay](#IAccessControlDefaultAdminRules-default_admin_delay) change.

Requirements:

- Only can be called by the current `default_admin`.

May emit a [DefaultAdminDelayChangeCanceled](#IAccessControlDefaultAdminRules-DefaultAdminDelayChangeCanceled) event.

#### [](#IAccessControlDefaultAdminRules-default_admin_delay_increase_wait)`default_admin_delay_increase_wait() → u64` external

Maximum time in seconds for an increase to [default\_admin\_delay](#IAccessControlDefaultAdminRules-default_admin_delay) (that is scheduled using [change\_default\_admin\_delay](#IAccessControlDefaultAdminRules-change_default_admin_delay)) to take effect. Defaults to 5 days.

When the [default\_admin\_delay](#IAccessControlDefaultAdminRules-default_admin_delay) is scheduled to be increased, it goes into effect after the new delay has passed with the purpose of giving enough time for reverting any accidental change (i.e. using milliseconds instead of seconds) that may lock the contract. However, to avoid excessive schedules, the wait is capped by this function and it can be overridden for a custom [default\_admin\_delay](#IAccessControlDefaultAdminRules-default_admin_delay) increase scheduling.

Make sure to add a reasonable amount of time while overriding this value, otherwise, there’s a risk of setting a high new delay that goes into effect almost immediately without the possibility of human intervention in the case of an input error (e.g. set milliseconds instead of seconds).

#### [](#IAccessControlDefaultAdminRules-Events)Events

#### [](#IAccessControlDefaultAdminRules-DefaultAdminTransferScheduled)`DefaultAdminTransferScheduled(new_admin: ContractAddress, accept_schedule: u64)` event

Emitted when a `default_admin` transfer is started.

Sets `new_admin` as the next address to become the `default_admin` by calling [accept\_default\_admin\_transfer](#IAccessControlDefaultAdminRules-accept_default_admin_transfer) only after `accept_schedule` passes.

#### [](#IAccessControlDefaultAdminRules-DefaultAdminTransferCanceled)`DefaultAdminTransferCanceled()` event

Emitted when a [pending\_default\_admin](#IAccessControlDefaultAdminRules-pending_default_admin) is reset if it was never accepted, regardless of its schedule.

#### [](#IAccessControlDefaultAdminRules-DefaultAdminDelayChangeScheduled)`DefaultAdminDelayChangeScheduled(new_delay: u64, effect_schedule: u64)` event

Emitted when a [default\_admin\_delay](#IAccessControlDefaultAdminRules-default_admin_delay) change is started.

Sets `new_delay` as the next delay to be applied between default admins transfers after `effect_schedule` has passed.

Emitted when a [pending\_default\_admin\_delay](#IAccessControlDefaultAdminRules-pending_default_admin_delay) is reset if its schedule didn’t pass.

## [](#core)Core

### [](#OwnableComponent)`OwnableComponent`[](https://github.com/OpenZeppelin/cairo-contracts/blob/release-v3.0.0-alpha.1/packages/access/src/ownable/ownable.cairo)

```rust
use openzeppelin_access::ownable::OwnableComponent;
```

`Ownable` provides a basic access control mechanism where an account (an owner) can be granted exclusive access to specific functions.

This module includes the internal `assert_only_owner` to restrict a function to be used only by the owner.

[Embeddable Mixin Implementations](../components#mixins)

OwnableMixinImpl

- [`OwnableImpl`](#OwnableComponent-Embeddable-Impls-OwnableImpl)
- [`OwnableCamelOnlyImpl`](#OwnableComponent-Embeddable-Impls-OwnableCamelOnlyImpl)

OwnableTwoStepMixinImpl

- [`OwnableTwoStepImpl`](#OwnableComponent-Embeddable-Impls-OwnableTwoStepImpl)
- [`OwnableTwoStepCamelOnlyImpl`](#OwnableComponent-Embeddable-Impls-OwnableTwoStepCamelOnlyImpl)

Embeddable Implementations

OwnableImpl

- [`owner(self)`](#OwnableComponent-owner)
- [`transfer_ownership(self, new_owner)`](#OwnableComponent-transfer_ownership)
- [`renounce_ownership(self)`](#OwnableComponent-renounce_ownership)

OwnableTwoStepImpl

- [`owner(self)`](#OwnableComponent-two-step-owner)
- [`pending_owner(self)`](#OwnableComponent-two-step-pending_owner)
- [`accept_ownership(self)`](#OwnableComponent-two-step-accept_ownership)
- [`transfer_ownership(self, new_owner)`](#OwnableComponent-two-step-transfer_ownership)
- [`renounce_ownership(self)`](#OwnableComponent-two-step-renounce_ownership)

OwnableCamelOnlyImpl

- [`transferOwnership(self, newOwner)`](#OwnableComponent-transferOwnership)
- [`renounceOwnership(self)`](#OwnableComponent-renounceOwnership)

OwnableTwoStepCamelOnlyImpl

- [`pendingOwner(self)`](#OwnableComponent-two-step-pendingOwner)
- [`acceptOwnership(self)`](#OwnableComponent-two-step-acceptOwnership)
- [`transferOwnership(self, new_owner)`](#OwnableComponent-two-step-transferOwnership)
- [`renounceOwnership(self)`](#OwnableComponent-two-step-renounceOwnership)

Internal Implementations

InternalImpl

- [`initializer(self, owner)`](#OwnableComponent-initializer)
- [`assert_only_owner(self)`](#OwnableComponent-assert_only_owner)
- [`_transfer_ownership(self, new_owner)`](#OwnableComponent-_transfer_ownership)
- [`_propose_owner(self, new_owner)`](#OwnableComponent-_propose_owner)

Events

- [`OwnershipTransferStarted(previous_owner, new_owner)`](#OwnableComponent-OwnershipTransferStarted)
- [`OwnershipTransferred(previous_owner, new_owner)`](#OwnableComponent-OwnershipTransferred)

#### [](#OwnableComponent-Embeddable-Functions)Embeddable functions

#### [](#OwnableComponent-owner)`owner(self: @ContractState) → ContractAddress` external

Returns the address of the current owner.

#### [](#OwnableComponent-transfer_ownership)`transfer_ownership(ref self: ContractState, new_owner: ContractAddress)` external

Transfers ownership of the contract to a new account (`new_owner`). Can only be called by the current owner.

Emits an [OwnershipTransferred](#OwnableComponent-OwnershipTransferred) event.

#### [](#OwnableComponent-renounce_ownership)`renounce_ownership(ref self: ContractState)` external

Leaves the contract without owner. It will not be possible to call `assert_only_owner` functions anymore. Can only be called by the current owner.

Renouncing ownership will leave the contract without an owner, thereby removing any functionality that is only available to the owner.

#### [](#OwnableComponent-Embeddable-Functions-Two-Step)Embeddable functions (two step transfer)

#### [](#OwnableComponent-two-step-owner)`owner(self: @ContractState) → ContractAddress` external

Returns the address of the current owner.

#### [](#OwnableComponent-two-step-pending_owner)`pending_owner(self: @ContractState) → ContractAddress` external

Returns the address of the pending owner.

#### [](#OwnableComponent-two-step-accept_ownership)`accept_ownership(ref self: ContractState)` external

Transfers ownership of the contract to the pending owner. Can only be called by the pending owner. Resets pending owner to zero address.

Emits an [OwnershipTransferred](#OwnableComponent-OwnershipTransferred) event.

#### [](#OwnableComponent-two-step-transfer_ownership)`transfer_ownership(ref self: ContractState, new_owner: ContractAddress)` external

Starts the two step ownership transfer process, by setting the pending owner. Setting `new_owner` to the zero address is allowed, this can be used to cancel an initiated ownership transfer.

Can only be called by the current owner.

Emits an [OwnershipTransferStarted](#OwnableComponent-OwnershipTransferStarted) event.

#### [](#OwnableComponent-two-step-renounce_ownership)`renounce_ownership(ref self: ContractState)` external

Leaves the contract without owner. It will not be possible to call `assert_only_owner` functions anymore. Can only be called by the current owner.

Renouncing ownership will leave the contract without an owner, thereby removing any functionality that is only available to the owner.

#### [](#OwnableComponent-transferOwnership)`transferOwnership(ref self: ContractState, newOwner: ContractAddress)` external

See [transfer\_ownership](#OwnableComponent-transfer_ownership).

#### [](#OwnableComponent-renounceOwnership)`renounceOwnership(ref self: ContractState)` external

See [renounce\_ownership](#OwnableComponent-renounce_ownership).

#### [](#OwnableComponent-two-step-pendingOwner)`pendingOwner(self: @ContractState)` external

See [pending\_owner](#OwnableComponent-two-step-pending_owner).

#### [](#OwnableComponent-two-step-acceptOwnership)`acceptOwnership(self: @ContractState)` external

See [accept\_ownership](#OwnableComponent-two-step-accept_ownership).

#### [](#OwnableComponent-two-step-transferOwnership)`transferOwnership(self: @ContractState)` external

See [transfer\_ownership](#OwnableComponent-two-step-transfer_ownership).

#### [](#OwnableComponent-two-step-renounceOwnership)`renounceOwnership(self: @ContractState)` external

See [renounce\_ownership](#OwnableComponent-two-step-renounce_ownership).

#### [](#OwnableComponent-Internal-Functions)Internal functions

#### [](#OwnableComponent-initializer)`initializer(ref self: ContractState, owner: ContractAddress)` internal

Initializes the contract and sets `owner` as the initial owner.

Requirements:

- `owner` cannot be the zero address.

Emits an [OwnershipTransferred](#OwnableComponent-OwnershipTransferred) event.

#### [](#OwnableComponent-assert_only_owner)`assert_only_owner(self: @ContractState)` internal

Panics if called by any account other than the owner.

#### [](#OwnableComponent-_transfer_ownership)`_transfer_ownership(ref self: ContractState, new_owner: ContractAddress)` internal

Transfers ownership of the contract to a new account (`new_owner`). Internal function without access restriction.

Emits an [OwnershipTransferred](#OwnableComponent-OwnershipTransferred) event.

#### [](#OwnableComponent-_propose_owner)`_propose_owner(ref self: ContractState, new_owner: ContractAddress)` internal

Sets a new pending owner in a two step transfer.

Internal function without access restriction.

Emits an [OwnershipTransferStarted](#OwnableComponent-OwnershipTransferStarted) event.

#### [](#OwnableComponent-Events)Events

#### [](#OwnableComponent-OwnershipTransferStarted)`OwnershipTransferStarted(previous_owner: ContractAddress, new_owner: ContractAddress)` event

Emitted when the pending owner is updated.

#### [](#OwnableComponent-OwnershipTransferred)`OwnershipTransferred(previous_owner: ContractAddress, new_owner: ContractAddress)` event

Emitted when the ownership is transferred.

### [](#AccessControlComponent)`AccessControlComponent`[](https://github.com/OpenZeppelin/cairo-contracts/blob/release-v3.0.0-alpha.1/packages/access/src/accesscontrol/accesscontrol.cairo)

```rust
use openzeppelin_access::accesscontrol::AccessControlComponent;
```

Component that allows contracts to implement role-based access control mechanisms. Roles are referred to by their `felt252` identifier:

```rust
const MY_ROLE: felt252 = selector!("MY_ROLE");
```

Roles can be used to represent a set of permissions. To restrict access to a function call, use [`assert_only_role`](#AccessControlComponent-assert_only_role):

```rust
(...)

#[external(v0)]
fn foo(ref self: ContractState) {
    self.accesscontrol.assert_only_role(MY_ROLE);

    // Do something
}
```

Roles can be granted and revoked dynamically via the [grant\_role](#AccessControlComponent-grant_role), [grant\_role\_with\_delay](#IAccessControlWithDelay-grant_role_with_delay) and [revoke\_role](#AccessControlComponent-revoke_role) functions. Each role has an associated admin role, and only accounts that have a role’s admin role can call [grant\_role](#AccessControlComponent-grant_role), [grant\_role\_with\_delay](#IAccessControlWithDelay-grant_role_with_delay) and [revoke\_role](#AccessControlComponent-revoke_role).

By default, the admin role for all roles is `DEFAULT_ADMIN_ROLE`, which means that only accounts with this role will be able to grant or revoke other roles. More complex role relationships can be created by using [set\_role\_admin](#AccessControlComponent-set_role_admin).

The `DEFAULT_ADMIN_ROLE` is also its own admin: it has permission to grant and revoke this role. Extra precautions should be taken to secure accounts that have been granted it. See [AccessControlDefaultAdminRulesComponent](#AccessControlDefaultAdminRulesComponent).

[Embeddable Mixin Implementations](../components#mixins)

AccessControlMixinImpl

- [`AccessControlImpl`](#AccessControlComponent-Embeddable-Impls-AccessControlImpl)
- [`AccessControlCamelImpl`](#AccessControlComponent-Embeddable-Impls-AccessControlCamelImpl)
- [`AccessControlWithDelayImpl`](#AccessControlComponent-Embeddable-Impls-AccessControlWithDelayImpl)
- [`SRC5Impl`](introspection#SRC5Component-Embeddable-Impls)

Embeddable Implementations

AccessControlImpl

- [`has_role(self, role, account)`](#AccessControlComponent-has_role)
- [`get_role_admin(self, role)`](#AccessControlComponent-get_role_admin)
- [`grant_role(self, role, account)`](#AccessControlComponent-grant_role)
- [`revoke_role(self, role, account)`](#AccessControlComponent-revoke_role)
- [`renounce_role(self, role, account)`](#AccessControlComponent-renounce_role)

AccessControlCamelImpl

- [`hasRole(self, role, account)`](#AccessControlComponent-hasRole)
- [`getRoleAdmin(self, role)`](#AccessControlComponent-getRoleAdmin)
- [`grantRole(self, role, account)`](#AccessControlComponent-grantRole)
- [`revokeRole(self, role, account)`](#AccessControlComponent-revokeRole)
- [`renounceRole(self, role, account)`](#AccessControlComponent-renounceRole)

AccessControlWithDelayImpl

- [`get_role_status(self, role, account)`](#AccessControlComponent-get_role_status)
- [`grant_role_with_delay(self, role, account, delay)`](#AccessControlComponent-grant_role_with_delay)

SRC5Impl

- [`supports_interface(self, interface_id: felt252)`](introspection#ISRC5-supports_interface)

Internal Implementations

InternalImpl

- [`initializer(self)`](#AccessControlComponent-initializer)
- [`assert_only_role(self, role)`](#AccessControlComponent-assert_only_role)
- [`is_role_effective(self, role, account)`](#AccessControlComponent-is_role_effective)
- [`resolve_role_status(self, role, account)`](#AccessControlComponent-resolve_role_status)
- [`is_role_granted(self, role, account)`](#AccessControlComponent-is_role_granted)
- [`set_role_admin(self, role, admin_role)`](#AccessControlComponent-set_role_admin)
- [`_grant_role(self, role, account)`](#AccessControlComponent-_grant_role)
- [`_grant_role_with_delay(self, role, account, delay)`](#AccessControlComponent-_grant_role_with_delay)
- [`_revoke_role(self, role, account)`](#AccessControlComponent-_revoke_role)

Events

IAccessControl

- [`RoleAdminChanged(role, previous_admin_role, new_admin_role)`](#AccessControlComponent-RoleAdminChanged)
- [`RoleGranted(role, account, sender)`](#AccessControlComponent-RoleGranted)
- [`RoleRevoked(role, account, sender)`](#AccessControlComponent-RoleRevoked)

IAccessControlWithDelay

- [`RoleGrantedWithDelay(role, account, sender, delay)`](#AccessControlComponent-RoleGrantedWithDelay)

#### [](#AccessControlComponent-Embeddable-Functions)Embeddable functions

#### [](#AccessControlComponent-has_role)`has_role(self: @ContractState, role: felt252, account: ContractAddress) → bool` external

Returns whether `account` can act as `role`.

#### [](#AccessControlComponent-get_role_admin)`get_role_admin(self: @ContractState, role: felt252) → felt252` external

Returns the admin role that controls `role`. See [grant\_role](#AccessControlComponent-grant_role) and [revoke\_role](#AccessControlComponent-revoke_role).

To change a role’s admin, use [set\_role\_admin](#AccessControlComponent-set_role_admin).

#### [](#AccessControlComponent-get_role_status)`get_role_status(self: @ContractState, role: felt252, account: ContractAddress) → RoleStatus` external

Returns the account’s status for the given role.

The possible statuses are:

- `NotGranted`: the role has not been granted to the account.
- `Delayed`: The role has been granted to the account but is not yet active due to a time delay.
- `Effective`: the role has been granted to the account and is currently active.

#### [](#AccessControlComponent-grant_role)`grant_role(ref self: ContractState, role: felt252, account: ContractAddress)` external

Grants `role` to `account`.

If `account` had not been already granted `role`, emits a [RoleGranted](#IAccessControl-RoleGranted) event.

Requirements:

- the caller must have `role`'s admin role.

May emit a [RoleGranted](#IAccessControl-RoleGranted) event.

#### [](#AccessControlComponent-grant_role_with_delay)`grant_role_with_delay(ref self: ContractState, role: felt252, account: ContractAddress, delay: u64)` external

Attempts to grant `role` to `account` with the specified activation delay.

Requirements:

- The caller must have \`role’s admin role.
- delay must be greater than 0.
- the `role` must not be already effective for `account`.

May emit a [RoleGrantedWithDelay](#IAccessControlWithDelay-RoleGrantedWithDelay) event.

#### [](#AccessControlComponent-revoke_role)`revoke_role(ref self: ContractState, role: felt252, account: ContractAddress)` external

Revokes `role` from `account`.

If `account` had been granted `role`, emits a [RoleRevoked](#IAccessControl-RoleRevoked) event.

Requirements:

- the caller must have `role`'s admin role.

May emit a [RoleRevoked](#IAccessControl-RoleRevoked) event.

#### [](#AccessControlComponent-renounce_role)`renounce_role(ref self: ContractState, role: felt252, account: ContractAddress)` external

Revokes `role` from the calling account.

Roles are often managed via [grant\_role](#AccessControlComponent-grant_role) and [revoke\_role](#AccessControlComponent-revoke_role). This function’s purpose is to provide a mechanism for accounts to lose their privileges if they are compromised (such as when a trusted device is misplaced).

If the calling account had been revoked `role`, emits a [RoleRevoked](#IAccessControl-RoleRevoked) event.

Requirements:

- the caller must be `account`.

May emit a [RoleRevoked](#IAccessControl-RoleRevoked) event.

#### [](#AccessControlComponent-supports_interface)`supports_interface(self: @ContractState, interface_id: felt252) → bool` external

See [ISRC5::supports\_interface](introspection#ISRC5-supports_interface).

#### [](#AccessControlComponent-hasRole)`hasRole(self: @ContractState, role: felt252, account: ContractAddress) → bool` external

See [has\_role](#AccessControlComponent-has_role).

#### [](#AccessControlComponent-getRoleAdmin)`getRoleAdmin(self: @ContractState, role: felt252) → felt252` external

See [get\_role\_admin](#AccessControlComponent-get_role_admin).

#### [](#AccessControlComponent-grantRole)`grantRole(ref self: ContractState, role: felt252, account: ContractAddress)` external

See [grant\_role](#AccessControlComponent-grant_role).

#### [](#AccessControlComponent-revokeRole)`revokeRole(ref self: ContractState, role: felt252, account: ContractAddress)` external

See [revoke\_role](#AccessControlComponent-revoke_role).

#### [](#AccessControlComponent-renounceRole)`renounceRole(ref self: ContractState, role: felt252, account: ContractAddress)` external

See [renounce\_role](#AccessControlComponent-renounce_role).

#### [](#AccessControlComponent-Internal-Functions)Internal functions

#### [](#AccessControlComponent-initializer)`initializer(ref self: ContractState)` internal

Initializes the contract by registering the [IAccessControl](#IAccessControl) interface ID.

#### [](#AccessControlComponent-assert_only_role)`assert_only_role(self: @ContractState, role: felt252)` internal

Validates that the caller can act as the given role. Otherwise it panics.

#### [](#AccessControlComponent-is_role_effective)`is_role_effective(self: @ContractState, role: felt252, account: ContractAddress) → bool` internal

Returns whether the account can act as the given role.

The account can act as the role if it is active and the `effective_from` time is before or equal to the current time.

If the `effective_from` timepoint is 0, the role is effective immediately. This is backwards compatible with implementations that didn’t use delays but a single boolean flag.

#### [](#AccessControlComponent-resolve_role_status)`resolve_role_status(self: @ContractState, role: felt252, account: ContractAddress) → RoleStatus` internal

Returns the account’s status for the given role.

The possible statuses are:

- `NotGranted`: the role has not been granted to the account.
- `Delayed`: The role has been granted to the account but is not yet active due to a time delay.
- `Effective`: the role has been granted to the account and is currently active.

#### [](#AccessControlComponent-is_role_granted)`is_role_granted(self: @ContractState, role: felt252, account: ContractAddress) → bool` internal

Returns whether the account has the given role granted.

The account may not be able to act as the role yet, if a delay was set and has not passed yet. Use `is_role_effective` to check if the account can act as the role.

#### [](#AccessControlComponent-set_role_admin)`set_role_admin(ref self: ContractState, role: felt252, admin_role: felt252)` internal

Sets `admin_role` as `role`'s admin role.

Internal function without access restriction.

Emits a [RoleAdminChanged](#IAccessControl-RoleAdminChanged) event.

#### [](#AccessControlComponent-_grant_role)`_grant_role(ref self: ContractState, role: felt252, account: ContractAddress)` internal

Attempts to grant `role` to `account`. The function does nothing if `role` is already effective for `account`. If `role` has been granted to `account`, but is not yet active due to a time delay, the delay is removed and `role` becomes effective immediately.

Internal function without access restriction.

May emit a [RoleGranted](#IAccessControl-RoleGranted) event.

#### [](#AccessControlComponent-_grant_role_with_delay)`_grant_role_with_delay(ref self: ContractState, role: felt252, account: ContractAddress, delay: u64)` internal

Attempts to grant `role` to `account` with the specified activation delay.

The role will become effective after the given delay has passed. If the role is already active (`Effective`) for the account, the function will panic. If the role has been granted but is not yet active (being in the `Delayed` state), the existing delay will be overwritten with the new `delay`.

Internal function without access restriction.

Requirements:

- delay must be greater than 0.
- the `role` must not be already effective for `account`.

May emit a [RoleGrantedWithDelay](#IAccessControlWithDelay-RoleGrantedWithDelay) event.

#### [](#AccessControlComponent-_revoke_role)`_revoke_role(ref self: ContractState, role: felt252, account: ContractAddress)` internal

Revokes `role` from `account`.

Internal function without access restriction.

May emit a [RoleRevoked](#IAccessControl-RoleRevoked) event.

#### [](#AccessControlComponent-Events)Events

#### [](#AccessControlComponent-RoleAdminChanged)`RoleAdminChanged(role: felt252, previous_admin_role: ContractAddress, new_admin_role: ContractAddress)` event

See [IAccessControl::RoleAdminChanged](#IAccessControl-RoleAdminChanged).

#### [](#AccessControlComponent-RoleGranted)`RoleGranted(role: felt252, account: ContractAddress, sender: ContractAddress)` event

See [IAccessControl::RoleGranted](#IAccessControl-RoleGranted).

#### [](#AccessControlComponent-RoleGrantedWithDelay)`RoleGrantedWithDelay(role: felt252, account: ContractAddress, sender: ContractAddress, delay: u64)` event

See [IAccessControlWithDelay::RoleGrantedWithDelay](#IAccessControlWithDelay-RoleGrantedWithDelay).

#### [](#AccessControlComponent-RoleRevoked)`RoleRevoked(role: felt252, account: ContractAddress, sender: ContractAddress)` event

See [IAccessControl::RoleRevoked](#IAccessControl-RoleRevoked).

## [](#extensions)Extensions

### [](#AccessControlDefaultAdminRulesComponent)`AccessControlDefaultAdminRulesComponent`[](https://github.com/OpenZeppelin/cairo-contracts/blob/release-v3.0.0-alpha.1/packages/access/src/accesscontrol/extensions/accesscontrol_default_admin_rules.cairo)

```rust
use openzeppelin_access::accesscontrol::extensions::AccessControlDefaultAdminRulesComponent;
```

Extension of [AccessControl](#AccessControlComponent) that allows specifying special rules to manage the `DEFAULT_ADMIN_ROLE` holder, which is a sensitive role with special permissions over other roles that may potentially have privileged rights in the system.

If a specific role doesn’t have an admin role assigned, the holder of the `DEFAULT_ADMIN_ROLE` will have the ability to grant it and revoke it.

This contract implements the following risk mitigations on top of [AccessControl](#AccessControlComponent):

- Only one account holds the `DEFAULT_ADMIN_ROLE` since deployment until it’s potentially renounced.
- Enforces a 2-step process to transfer the `DEFAULT_ADMIN_ROLE` to another account.
- Enforces a configurable delay between the two steps, with the ability to cancel before the transfer is accepted.
- The delay can be changed by scheduling, see [change\_default\_admin\_delay](#IAccessControlDefaultAdminRules-change_default_admin_delay).
- It is not possible to use another role to manage the `DEFAULT_ADMIN_ROLE`.

[Embeddable Mixin Implementations](../components#mixins)

AccessControlMixinImpl

- [`AccessControlDefaultAdminRulesImpl`](#AccessControlDefaultAdminRulesComponent-Embeddable-Impls-AccessControlDefaultAdminRulesImpl)
- [`AccessControlImpl`](#AccessControlDefaultAdminRulesComponent-Embeddable-Impls-AccessControlImpl)
- [`AccessControlCamelImpl`](#AccessControlDefaultAdminRulesComponent-Embeddable-Impls-AccessControlCamelImpl)
- [`AccessControlWithDelayImpl`](#AccessControlDefaultAdminRulesComponent-Embeddable-Impls-AccessControlWithDelayImpl)
- [`SRC5Impl`](introspection#SRC5Component-Embeddable-Impls)

Embeddable Implementations

AccessControlDefaultAdminRulesImpl

- [`default_admin(self)`](#IAccessControlDefaultAdminRules-default_admin)
- [`pending_default_admin(self)`](#IAccessControlDefaultAdminRules-pending_default_admin)
- [`default_admin_delay(self)`](#IAccessControlDefaultAdminRules-default_admin_delay)
- [`pending_default_admin_delay(self)`](#IAccessControlDefaultAdminRules-pending_default_admin_delay)
- [`begin_default_admin_transfer(self, new_admin)`](#IAccessControlDefaultAdminRules-begin_default_admin_transfer)
- [`cancel_default_admin_transfer(self)`](#IAccessControlDefaultAdminRules-cancel_default_admin_transfer)
- [`accept_default_admin_transfer(self)`](#IAccessControlDefaultAdminRules-accept_default_admin_transfer)
- [`change_default_admin_delay(self, new_delay)`](#IAccessControlDefaultAdminRules-change_default_admin_delay)
- [`rollback_default_admin_delay(self)`](#IAccessControlDefaultAdminRules-rollback_default_admin_delay)
- [`default_admin_delay_increase_wait(self)`](#IAccessControlDefaultAdminRules-default_admin_delay_increase_wait)

AccessControlImpl

- [`has_role(self, role, account)`](#AccessControlDefaultAdminRulesComponent-has_role)
- [`get_role_admin(self, role)`](#AccessControlDefaultAdminRulesComponent-get_role_admin)
- [`grant_role(self, role, account)`](#AccessControlDefaultAdminRulesComponent-grant_role)
- [`revoke_role(self, role, account)`](#AccessControlDefaultAdminRulesComponent-revoke_role)
- [`renounce_role(self, role, account)`](#AccessControlDefaultAdminRulesComponent-renounce_role)

AccessControlCamelImpl

- [`hasRole(self, role, account)`](#AccessControlDefaultAdminRulesComponent-hasRole)
- [`getRoleAdmin(self, role)`](#AccessControlDefaultAdminRulesComponent-getRoleAdmin)
- [`grantRole(self, role, account)`](#AccessControlDefaultAdminRulesComponent-grantRole)
- [`revokeRole(self, role, account)`](#AccessControlDefaultAdminRulesComponent-revokeRole)
- [`renounceRole(self, role, account)`](#AccessControlDefaultAdminRulesComponent-renounceRole)

AccessControlWithDelayImpl

- [`get_role_status(self, role, account)`](#AccessControlDefaultAdminRulesComponent-get_role_status)
- [`grant_role_with_delay(self, role, account, delay)`](#AccessControlDefaultAdminRulesComponent-grant_role_with_delay)

SRC5Impl

- [`supports_interface(self, interface_id: felt252)`](introspection#ISRC5-supports_interface)

Internal Implementations

InternalImpl

- [`initializer(self, initial_delay, initial_default_admin)`](#AccessControlDefaultAdminRulesComponent-initializer)
- [`assert_only_role(self, role)`](#AccessControlDefaultAdminRulesComponent-assert_only_role)
- [`is_role_effective(self, role, account)`](#AccessControlDefaultAdminRulesComponent-is_role_effective)
- [`resolve_role_status(self, role, account)`](#AccessControlDefaultAdminRulesComponent-resolve_role_status)
- [`is_role_granted(self, role, account)`](#AccessControlDefaultAdminRulesComponent-is_role_granted)
- [`set_role_admin(self, role, admin_role)`](#AccessControlDefaultAdminRulesComponent-set_role_admin)
- [`_grant_role(self, role, account)`](#AccessControlDefaultAdminRulesComponent-_grant_role)
- [`_grant_role_with_delay(self, role, account, delay)`](#AccessControlDefaultAdminRulesComponent-_grant_role_with_delay)
- [`_revoke_role(self, role, account)`](#AccessControlDefaultAdminRulesComponent-_revoke_role)
- [`set_pending_default_admin(self, new_admin, new_schedule)`](#AccessControlDefaultAdminRulesComponent-set_pending_default_admin)
- [`set_pending_delay(self, new_delay, new_schedule)`](#AccessControlDefaultAdminRulesComponent-set_pending_delay)
- [`delay_change_wait(self, new_delay)`](#AccessControlDefaultAdminRulesComponent-delay_change_wait)

Events

IAccessControl

- [`RoleAdminChanged(role, previous_admin_role, new_admin_role)`](#AccessControlDefaultAdminRulesComponent-RoleAdminChanged)
- [`RoleGranted(role, account, sender)`](#AccessControlDefaultAdminRulesComponent-RoleGranted)
- [`RoleRevoked(role, account, sender)`](#AccessControlDefaultAdminRulesComponent-RoleRevoked)

IAccessControlWithDelay

- [`RoleGrantedWithDelay(role, account, sender, delay)`](#AccessControlDefaultAdminRulesComponent-RoleGrantedWithDelay)

IAccessControlDefaultAdminRules

- [`DefaultAdminTransferScheduled(new_admin, accept_schedule)`](#AccessControlDefaultAdminRulesComponent-DefaultAdminTransferScheduled)
- [`DefaultAdminTransferCanceled()`](#AccessControlDefaultAdminRulesComponent-DefaultAdminTransferCanceled)
- [`DefaultAdminDelayChangeScheduled(new_delay, effect_schedule)`](#AccessControlDefaultAdminRulesComponent-DefaultAdminDelayChangeScheduled)
- [`DefaultAdminDelayChangeCanceled()`](#AccessControlDefaultAdminRulesComponent-DefaultAdminDelayChangeCanceled)

#### [](#AccessControlDefaultAdminRulesComponent-Embeddable-Functions)Embeddable functions

#### [](#AccessControlDefaultAdminRulesComponent-default_admin)`default_admin(self: @ContractState) → ContractAddress` external

Returns the address of the current `DEFAULT_ADMIN_ROLE` holder.

#### [](#AccessControlDefaultAdminRulesComponent-pending_default_admin)`pending_default_admin(self: @ContractState) → (ContractAddress, u64)` external

Returns a tuple of a `new_admin` and an `accept_schedule`.

After the `accept_schedule` passes, the `new_admin` will be able to accept the `default_admin` role by calling [accept\_default\_admin\_transfer](#AccessControlDefaultAdminRulesComponent-accept_default_admin_transfer), completing the role transfer.

A zero value only in `accept_schedule` indicates no pending admin transfer.

A zero address `new_admin` means that `default_admin` is being renounced.

#### [](#AccessControlDefaultAdminRulesComponent-default_admin_delay)`default_admin_delay(self: @ContractState) → u64` external

Returns the delay required to schedule the acceptance of a `default_admin` transfer started.

This delay will be added to the current timestamp when calling [begin\_default\_admin\_transfer](#AccessControlDefaultAdminRulesComponent-begin_default_admin_transfer) to set the acceptance schedule.

If a delay change has been scheduled, it will take effect as soon as the schedule passes, making this function returns the new delay.

See [change\_default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-change_default_admin_delay).

#### [](#AccessControlDefaultAdminRulesComponent-pending_default_admin_delay)`pending_default_admin_delay(self: @ContractState) → (u64, u64)` external

Returns a tuple of `new_delay` and an `effect_schedule`.

After the `effect_schedule` passes, the `new_delay` will get into effect immediately for every new `default_admin` transfer started with [begin\_default\_admin\_transfer](#AccessControlDefaultAdminRulesComponent-begin_default_admin_transfer).

A zero value only in `effect_schedule` indicates no pending delay change.

A zero value only for `new_delay` means that the next [default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-default_admin_delay) will be zero after the effect schedule.

#### [](#AccessControlDefaultAdminRulesComponent-begin_default_admin_transfer)`begin_default_admin_transfer(ref self: ContractState, new_admin: ContractAddress)` external

Starts a `default_admin` transfer by setting a [pending\_default\_admin](#AccessControlDefaultAdminRulesComponent-pending_default_admin) scheduled for acceptance after the current timestamp plus a [default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-default_admin_delay).

Requirements:

- Only can be called by the current `default_admin`.

Emits a [DefaultAdminTransferScheduled](#AccessControlDefaultAdminRulesComponent-DefaultAdminTransferScheduled) event.

#### [](#AccessControlDefaultAdminRulesComponent-cancel_default_admin_transfer)`cancel_default_admin_transfer(ref self: ContractState)` external

Cancels a `default_admin` transfer previously started with [begin\_default\_admin\_transfer](#AccessControlDefaultAdminRulesComponent-begin_default_admin_transfer).

A [pending\_default\_admin](#AccessControlDefaultAdminRulesComponent-pending_default_admin) not yet accepted can also be cancelled with this function.

Requirements:

- Only can be called by the current `default_admin`.

May emit a [DefaultAdminTransferCanceled](#AccessControlDefaultAdminRulesComponent-DefaultAdminTransferCanceled) event.

#### [](#AccessControlDefaultAdminRulesComponent-accept_default_admin_transfer)`accept_default_admin_transfer(ref self: ContractState)` external

Completes a `default_admin` transfer previously started with [begin\_default\_admin\_transfer](#AccessControlDefaultAdminRulesComponent-begin_default_admin_transfer).

After calling the function:

- `DEFAULT_ADMIN_ROLE` must be granted to the caller.
- `DEFAULT_ADMIN_ROLE` must be revoked from the previous holder.
- [pending\_default\_admin](#AccessControlDefaultAdminRulesComponent-pending_default_admin) must be reset to zero values.

Requirements:

- Only can be called by the [pending\_default\_admin](#AccessControlDefaultAdminRulesComponent-pending_default_admin)'s `new_admin`.
- The [pending\_default\_admin](#AccessControlDefaultAdminRulesComponent-pending_default_admin)'s `accept_schedule` should’ve passed.

#### [](#AccessControlDefaultAdminRulesComponent-change_default_admin_delay)`change_default_admin_delay(ref self: ContractState, new_delay: u64)` external

Initiates a [default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-default_admin_delay) update by setting a [pending\_default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-pending_default_admin_delay) scheduled for getting into effect after the current timestamp plus a [default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-default_admin_delay).

This function guarantees that any call to [begin\_default\_admin\_transfer](#AccessControlDefaultAdminRulesComponent-begin_default_admin_transfer) done between the timestamp this method is called and the [pending\_default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-pending_default_admin_delay) effect schedule will use the current [default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-default_admin_delay) set before calling.

The [pending\_default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-pending_default_admin_delay)'s effect schedule is defined in a way that waiting until the schedule and then calling [begin\_default\_admin\_transfer](#AccessControlDefaultAdminRulesComponent-begin_default_admin_transfer) with the new delay will take at least the same as another `default_admin` complete transfer (including acceptance).

The schedule is designed for two scenarios:

- When the delay is changed for a larger one the schedule is `block.timestamp new delay` capped by [default\_admin\_delay\_increase\_wait](#AccessControlDefaultAdminRulesComponent-default_admin_delay_increase_wait).
- When the delay is changed for a shorter one, the schedule is `block.timestamp (current delay - new delay)`.

A [pending\_default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-pending_default_admin_delay) that never got into effect will be canceled in favor of a new scheduled change.

Requirements:

- Only can be called by the current `default_admin`.

Emits a [DefaultAdminDelayChangeScheduled](#AccessControlDefaultAdminRulesComponent-DefaultAdminDelayChangeScheduled) event and may emit a [DefaultAdminDelayChangeCanceled](#AccessControlDefaultAdminRulesComponent-DefaultAdminDelayChangeCanceled) event.

#### [](#AccessControlDefaultAdminRulesComponent-rollback_default_admin_delay)`rollback_default_admin_delay(ref self: ContractState)` external

Cancels a scheduled [default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-default_admin_delay) change.

Requirements:

- Only can be called by the current `default_admin`.

May emit a [DefaultAdminDelayChangeCanceled](#AccessControlDefaultAdminRulesComponent-DefaultAdminDelayChangeCanceled) event.

#### [](#AccessControlDefaultAdminRulesComponent-default_admin_delay_increase_wait)`default_admin_delay_increase_wait(self: @ContractState) → u64` external

Maximum time in seconds for an increase to [default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-default_admin_delay) (that is scheduled using [change\_default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-change_default_admin_delay)) to take effect. Defaults to 5 days.

When the [default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-default_admin_delay) is scheduled to be increased, it goes into effect after the new delay has passed with the purpose of giving enough time for reverting any accidental change (i.e. using milliseconds instead of seconds) that may lock the contract. However, to avoid excessive schedules, the wait is capped by this function and it can be overridden for a custom [default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-default_admin_delay) increase scheduling.

Make sure to add a reasonable amount of time while overriding this value, otherwise, there’s a risk of setting a high new delay that goes into effect almost immediately without the possibility of human intervention in the case of an input error (eg. set milliseconds instead of seconds).

#### [](#AccessControlDefaultAdminRulesComponent-has_role)`has_role(self: @ContractState, role: felt252, account: ContractAddress) → bool` external

Returns whether `account` can act as `role`.

#### [](#AccessControlDefaultAdminRulesComponent-get_role_admin)`get_role_admin(self: @ContractState, role: felt252) → felt252` external

Returns the admin role that controls `role`. See [grant\_role](#AccessControlComponent-grant_role) and [revoke\_role](#AccessControlComponent-revoke_role).

To change a role’s admin, use [set\_role\_admin](#AccessControlComponent-set_role_admin).

#### [](#AccessControlDefaultAdminRulesComponent-get_role_status)`get_role_status(self: @ContractState, role: felt252, account: ContractAddress) → RoleStatus` external

Returns the account’s status for the given role.

The possible statuses are:

- `NotGranted`: the role has not been granted to the account.
- `Delayed`: The role has been granted to the account but is not yet active due to a time delay.
- `Effective`: the role has been granted to the account and is currently active.

#### [](#AccessControlDefaultAdminRulesComponent-grant_role)`grant_role(ref self: ContractState, role: felt252, account: ContractAddress)` external

Grants `role` to `account`.

If `account` had not been already granted `role`, emits a [RoleGranted](#AccessControlDefaultAdminRulesComponent-RoleGranted) event.

Requirements:

- the caller must have `role`'s admin role.

May emit a [RoleGranted](#AccessControlDefaultAdminRulesComponent-RoleGranted) event.

#### [](#AccessControlDefaultAdminRulesComponent-grant_role_with_delay)`grant_role_with_delay(ref self: ContractState, role: felt252, account: ContractAddress, delay: u64)` external

Attempts to grant `role` to `account` with the specified activation delay.

Requirements:

- The caller must have \`role’s admin role.
- delay must be greater than 0.
- the `role` must not be already effective for `account`.

May emit a [RoleGrantedWithDelay](#AccessControlDefaultAdminRulesComponent-RoleGrantedWithDelay) event.

#### [](#AccessControlDefaultAdminRulesComponent-revoke_role)`revoke_role(ref self: ContractState, role: felt252, account: ContractAddress)` external

Revokes `role` from `account`.

If `account` had been granted `role`, emits a [RoleRevoked](#AccessControlDefaultAdminRulesComponent-RoleRevoked) event.

Requirements:

- the caller must have `role`'s admin role.

May emit a [RoleRevoked](#AccessControlDefaultAdminRulesComponent-RoleRevoked) event.

#### [](#AccessControlDefaultAdminRulesComponent-renounce_role)`renounce_role(ref self: ContractState, role: felt252, account: ContractAddress)` external

Revokes `role` from the calling account.

Roles are often managed via [grant\_role](#AccessControlComponent-grant_role) and [revoke\_role](#AccessControlComponent-revoke_role). This function’s purpose is to provide a mechanism for accounts to lose their privileges if they are compromised (such as when a trusted device is misplaced).

If the calling account had been revoked `role`, emits a [RoleRevoked](#AccessControlDefaultAdminRulesComponent-RoleRevoked) event.

Requirements:

- the caller must be `account`.

May emit a [RoleRevoked](#AccessControlDefaultAdminRulesComponent-RoleRevoked) event.

#### [](#AccessControlDefaultAdminRulesComponent-supports_interface)`supports_interface(self: @ContractState, interface_id: felt252) → bool` external

See [ISRC5::supports\_interface](introspection#ISRC5-supports_interface).

#### [](#AccessControlDefaultAdminRulesComponent-hasRole)`hasRole(self: @ContractState, role: felt252, account: ContractAddress) → bool` external

See [has\_role](#AccessControlDefaultAdminRulesComponent-has_role).

#### [](#AccessControlDefaultAdminRulesComponent-getRoleAdmin)`getRoleAdmin(self: @ContractState, role: felt252) → felt252` external

See [get\_role\_admin](#AccessControlDefaultAdminRulesComponent-get_role_admin).

#### [](#AccessControlDefaultAdminRulesComponent-grantRole)`grantRole(ref self: ContractState, role: felt252, account: ContractAddress)` external

See [grant\_role](#AccessControlDefaultAdminRulesComponent-grant_role).

#### [](#AccessControlDefaultAdminRulesComponent-revokeRole)`revokeRole(ref self: ContractState, role: felt252, account: ContractAddress)` external

See [revoke\_role](#AccessControlDefaultAdminRulesComponent-revoke_role).

#### [](#AccessControlDefaultAdminRulesComponent-renounceRole)`renounceRole(ref self: ContractState, role: felt252, account: ContractAddress)` external

See [renounce\_role](#AccessControlDefaultAdminRulesComponent-renounce_role).

#### [](#AccessControlDefaultAdminRulesComponent-Internal-Functions)Internal functions

#### [](#AccessControlDefaultAdminRulesComponent-initializer)`initializer(ref self: ContractState, initial_delay: u64, initial_default_admin: ContractAddress)` external

Initializes the contract by registering the IAccessControl interface ID and setting the initial delay and default admin.

Requirements:

- `initial_default_admin` must not be the zero address.

#### [](#AccessControlDefaultAdminRulesComponent-assert_only_role)`assert_only_role(self: @ContractState, role: felt252)` external

Validates that the caller can act as the given role. Otherwise it panics.

#### [](#AccessControlDefaultAdminRulesComponent-is_role_effective)`is_role_effective(self: @ContractState, role: felt252, account: ContractAddress) → bool` external

Returns whether the account can act as the given role.

The account can act as the role if it is active and the `effective_from` time is before or equal to the current time.

If the `effective_from` timepoint is 0, the role is effective immediately. This is backwards compatible with implementations that didn’t use delays but a single boolean flag.

#### [](#AccessControlDefaultAdminRulesComponent-resolve_role_status)`resolve_role_status(self: @ContractState, role: felt252, account: ContractAddress) → RoleStatus` external

Returns the account’s status for the given role.

The possible statuses are:

- `NotGranted`: the role has not been granted to the account.
- `Delayed`: The role has been granted to the account but is not yet active due to a time delay.
- `Effective`: the role has been granted to the account and is currently active.

#### [](#AccessControlDefaultAdminRulesComponent-is_role_granted)`is_role_granted(self: @ContractState, role: felt252, account: ContractAddress) → bool` external

Returns whether the account has the given role granted.

The account may not be able to act as the role yet, if a delay was set and has not passed yet. Use is\_role\_effective to check if the account can act as the role.

#### [](#AccessControlDefaultAdminRulesComponent-set_role_admin)`set_role_admin(ref self: ContractState, role: felt252, admin_role: felt252)` external

Sets `admin_role` as \`role’s admin role.

Internal function without access restriction.

Requirements:

- `role` must not be `DEFAULT_ADMIN_ROLE`.

Emits a [RoleAdminChanged](#AccessControlDefaultAdminRulesComponent-RoleAdminChanged) event.

#### [](#AccessControlDefaultAdminRulesComponent-_grant_role)`_grant_role(ref self: ContractState, role: felt252, account: ContractAddress)` external

Attempts to grant `role` to `account`. The function does nothing if `role` is already effective for `account`. If `role` has been granted to `account`, but is not yet active due to a time delay, the delay is removed and `role` becomes effective immediately.

Internal function without access restriction.

For `DEFAULT_ADMIN_ROLE`, it only allows granting if there isn’t already a `default_admin` or if the role has been previously renounced.

Exposing this function through another mechanism may make the `DEFAULT_ADMIN_ROLE` assignable again. Make sure to guarantee this is the expected behavior in your implementation.

May emit a [RoleGranted](#AccessControlDefaultAdminRulesComponent-RoleGranted) event.

#### [](#AccessControlDefaultAdminRulesComponent-_grant_role_with_delay)`_grant_role_with_delay(ref self: ContractState, role: felt252, account: ContractAddress, delay: u64)` external

Attempts to grant `role` to `account` with the specified activation delay.

The role will become effective after the given delay has passed. If the role is already active (`Effective`) for the account, the function will panic. If the role has been granted but is not yet active (being in the `Delayed` state), the existing delay will be overwritten with the new `delay`.

Internal function without access restriction.

Requirements:

- `delay` must be greater than 0.
- the `role` must not be already effective for `account`.
- `role` must not be `DEFAULT_ADMIN_ROLE`.

May emit a [RoleGrantedWithDelay](#AccessControlDefaultAdminRulesComponent-RoleGrantedWithDelay) event.

#### [](#AccessControlDefaultAdminRulesComponent-_revoke_role)`_revoke_role(ref self: ContractState, role: felt252, account: ContractAddress)` external

Attempts to revoke `role` from `account`. The function does nothing if `role` is not effective for `account`. If `role` has been revoked from `account`, but is still active due to a time delay, the delay is removed and `role` becomes inactive immediately.

Internal function without access restriction.

May emit a [RoleRevoked](#AccessControlDefaultAdminRulesComponent-RoleRevoked) event.

#### [](#AccessControlDefaultAdminRulesComponent-set_pending_default_admin)`set_pending_default_admin(ref self: ContractState, new_admin: ContractAddress, new_schedule: u64)` external

Setter of the tuple for pending admin and its schedule.

May emit a DefaultAdminTransferCanceled event.

#### [](#AccessControlDefaultAdminRulesComponent-set_pending_delay)`set_pending_delay(ref self: ContractState, new_delay: u64, new_schedule: u64)` external

Setter of the tuple for pending delay and its schedule.

May emit a DefaultAdminDelayChangeCanceled event.

#### [](#AccessControlDefaultAdminRulesComponent-delay_change_wait)`delay_change_wait(self: @ContractState, new_delay: u64) → u64` external

Returns the amount of seconds to wait after the `new_delay` will become the new `default_admin_delay`.

The value returned guarantees that if the delay is reduced, it will go into effect after a wait that honors the previously set delay.

See [default\_admin\_delay\_increase\_wait](#AccessControlDefaultAdminRulesComponent-default_admin_delay_increase_wait).

#### [](#AccessControlDefaultAdminRulesComponent-Events)Events

#### [](#AccessControlDefaultAdminRulesComponent-RoleAdminChanged)`RoleAdminChanged(role: felt252, previous_admin_role: felt252, new_admin_role: felt252)` event

Emitted when `new_admin_role` is set as ``role’s admin role, replacing `previous_admin_role``

`DEFAULT_ADMIN_ROLE` is the starting admin for all roles, despite `RoleAdminChanged` not being emitted signaling this.

#### [](#AccessControlDefaultAdminRulesComponent-RoleGranted)`RoleGranted(role: felt252, account: ContractAddress, sender: ContractAddress)` event

Emitted when `account` is granted `role`.

`sender` is the account that originated the contract call, an account with the admin role or the deployer address if `_grant_role` is called from the constructor.

#### [](#AccessControlDefaultAdminRulesComponent-RoleRevoked)`RoleRevoked(role: felt252, account: ContractAddress, sender: ContractAddress)` event

Emitted when `role` is revoked for `account`.

`sender` is the account that originated the contract call:

- If using `revoke_role`, it is the admin role bearer.
- If using `renounce_role`, it is the role bearer (i.e. `account`).

#### [](#AccessControlDefaultAdminRulesComponent-RoleGrantedWithDelay)`RoleGrantedWithDelay(role: felt252, account: ContractAddress, sender: ContractAddress, delay: u64)` event

Emitted when `account` is granted `role` with a delay.

`sender` is the account that originated the contract call, an account with the admin role or the deployer address if `_grant_role_with_delay` is called from the constructor.

#### [](#AccessControlDefaultAdminRulesComponent-DefaultAdminTransferScheduled)`DefaultAdminTransferScheduled(new_admin: ContractAddress, accept_schedule: u64)` event

Emitted when a `default_admin` transfer is started.

Sets `new_admin` as the next address to become the `default_admin` by calling [accept\_default\_admin\_transfer](#AccessControlDefaultAdminRulesComponent-accept_default_admin_transfer) only after `accept_schedule` passes.

#### [](#AccessControlDefaultAdminRulesComponent-DefaultAdminTransferCanceled)`DefaultAdminTransferCanceled()` event

Emitted when a [pending\_default\_admin](#AccessControlDefaultAdminRulesComponent-pending_default_admin) is reset if it was never accepted, regardless of its schedule.

#### [](#AccessControlDefaultAdminRulesComponent-DefaultAdminDelayChangeScheduled)`DefaultAdminDelayChangeScheduled(new_delay: u64, effect_schedule: u64)` event

Emitted when a [default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-default_admin_delay) change is started.

Sets `new_delay` as the next delay to be applied between default admins transfers after `effect_schedule` has passed.

Emitted when a [pending\_default\_admin\_delay](#AccessControlDefaultAdminRulesComponent-pending_default_admin_delay) is reset if its schedule didn’t pass.
