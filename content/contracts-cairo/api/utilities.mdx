---
title: Utilities
---

This crate provides miscellaneous components and libraries containing utility functions to handle common tasks.

## [](#core)Core

### [](#utils)`utils`

```rust
use openzeppelin_utils;
```

Module containing core utilities of the library.

Members

Inner modules

- [`cryptography`](#utils-cryptography)
- [`deployments`](#utils-deployments)
- [`math`](#utils-math)
- [`contract_clock`](#utils-contract_clock)
- [`serde`](#utils-serde)

#### [](#utils-Inner-Modules)Inner modules

#### [](#utils-cryptography)`cryptography` module

See [`openzeppelin_utils::cryptography`](#cryptography).

#### [](#utils-deployments)`deployments` module

See [`openzeppelin_utils::deployments`](#deployments).

#### [](#utils-math)`math` module

See [`openzeppelin_utils::math`](#math).

#### [](#utils-contract_clock)`contract_clock` module

See [`openzeppelin_utils::contract_clock`](#contract_clock).

#### [](#utils-serde)`serde` module

See [`openzeppelin_utils::serde`](#serde).

### [](#cryptography)`cryptography`

```rust
use openzeppelin_utils::cryptography;
```

Module containing utilities related to cryptography.

Members

Inner modules

- [`nonces`](#cryptography-nonces)
- [`snip12`](#cryptography-snip12)

#### [](#inner_modules)Inner modules

#### [](#cryptography-nonces)`nonces` module

See [`openzeppelin_utils::cryptography::nonces::NoncesComponent`](#NoncesComponent).

#### [](#cryptography-snip12)`snip12` module

See [`openzeppelin_utils::cryptography::snip12`](#snip12).

### [](#deployments)`deployments`

```rust
use openzeppelin_utils::deployments;
```

Module containing utility functions for calculating contract addresses through [deploy\_syscall](https://docs.starknet.io/architecture-and-concepts/smart-contracts/system-calls-cairo1/#deploy) and the [Universal Deployer Contract](../udc) (UDC).

Members

Structs

- [`DeployerInfo(caller_address, udc_address)`](#deployments-DeployerInfo)

Functions

- [`calculate_contract_address_from_deploy_syscall(salt, class_hash, constructor_calldata, deployer_address)`](#deployments-calculate_contract_address_from_deploy_syscall)
- [`compute_hash_on_elements(data)`](#deployments-compute_hash_on_elements)
- [`calculate_contract_address_from_udc(salt, class_hash, constructor_calldata, deployer_info)`](#deployments-calculate_contract_address_from_udc)

#### [](#deployments-Structs)Structs

#### [](#deployments-DeployerInfo)`DeployerInfo(caller_address: ContractAddress, udc_address: ContractAddress)` struct

Struct containing arguments necessary in [utils::calculate\_contract\_address\_from\_udc](#deployments-calculate_contract_address_from_udc) for origin-dependent deployment calculations.

#### [](#deployments-Functions)Functions

#### [](#deployments-calculate_contract_address_from_deploy_syscall)`calculate_contract_address_from_deploy_syscall(salt: felt252, class_hash: ClassHash, constructor_calldata: Span<felt252>, deployer_address: ContractAddress) → ContractAddress` function

Returns the contract address when passing the given arguments to [deploy\_syscall](https://docs.starknet.io/architecture-and-concepts/smart-contracts/system-calls-cairo1/#deploy).

#### [](#deployments-compute_hash_on_elements)`compute_hash_on_elements(data: Span<felt252>) → felt252` function

Creates a Pedersen hash chain with the elements of `data` and returns the finalized hash.

#### [](#deployments-calculate_contract_address_from_udc)`calculate_contract_address_from_udc(salt: felt252, class_hash: ClassHash, constructor_calldata: Span<felt252>, deployer_info: Option<DeployerInfo>) → ContractAddress` function

Returns the calculated contract address for UDC deployments.

Origin-independent deployments (deployed from zero) should pass `Option::None` as `deployer_info`.

Origin-dependent deployments hash `salt` with `caller_address` (member of [DeployerInfo](#deployments-DeployerInfo)) and pass the hashed salt to the inner [deploy\_syscall](https://docs.starknet.io/architecture-and-concepts/smart-contracts/system-calls-cairo1/#deploy) as the `contract_address_salt` argument.

### [](#math)`math`

```rust
use openzeppelin_utils::math;
```

Module containing math utilities.

Members

Functions

- [`average(a, b)`](#math-average)

#### [](#math-Functions)Functions

#### [](#math-average)`average(a: T, b: T) → T` function

Returns the average of two unsigned integers. The result is rounded down.

`T` is a generic value matching different numeric implementations.

### [](#contract_clock)`contract_clock`

```rust
use openzeppelin_utils::contract_clock;
```

Module providing a trait for the [EIP-6372](https://eips.ethereum.org/EIPS/eip-6372) standard along with default clock implementations based on either block number or block timestamp.

Traits

- [`ERC6372Clock`](#ERC6372Clock)

Implementations

- [`ERC6372BlockNumberClock`](#contract_clock-ERC6372BlockNumberClock)
- [`ERC6372TimestampClock`](#contract_clock-ERC6372TimestampClock)

#### [](#ERC6372Clock)`ERC6372Clock` [github-icon](https://github.com/OpenZeppelin/cairo-contracts/blob/votes-erc6372/packages/utils/src/contract_clock.cairo)

```rust
use openzeppelin_utils::contract_clock::ERC6372Clock;
```

A trait for the [EIP-6372](https://eips.ethereum.org/EIPS/eip-6372) standard that allows flexible internal clock implementation — based on block timestamp, block number, or a custom logic.

Functions

- [`clock()`](#ERC6372Clock-clock)
- [`CLOCK_MODE()`](#ERC6372Clock-CLOCK_MODE)

#### [](#ERC6372Clock-Functions)Functions

#### [](#ERC6372Clock-clock)`clock() → u64` external

Returns the current timepoint determined by the contract’s operational mode, intended for use in time-sensitive logic.

Requirements:

- This function MUST always be non-decreasing.

#### [](#ERC6372Clock-CLOCK_MODE)`CLOCK_MODE() → ByteArray` external

Returns a description of the clock the contract is operating in.

Requirements:

- The output MUST be formatted like a URL query string, decodable in standard JavaScript.

#### [](#contract_clock-Impls)Implementations

#### [](#contract_clock-ERC6372BlockNumberClock)`ERC6372BlockNumberClock` impl

Implementation of the `ERC6372Clock` trait that uses the block number as its clock reference.

#### [](#contract_clock-ERC6372TimestampClock)`ERC6372TimestampClock` impl

Implementation of the `ERC6372Clock` trait that uses the block timestamp as its clock reference.

### [](#serde)`serde`

```rust
use openzeppelin_utils::serde;
```

Module containing utilities related to serialization and deserialization of Cairo data structures.

Members

Traits

- [`SerializedAppend`](#serde-SerializedAppend)

#### [](#serde-Traits)Traits

#### [](#serde-SerializedAppend)`SerializedAppend` trait

Importing this trait allows the ability to append a serialized representation of a Cairo data structure already implementing the `Serde` trait to a `felt252` buffer.

Usage example:

```rust
use openzeppelin_utils::serde::SerializedAppend;
use starknet::ContractAddress;

fn to_calldata(recipient: ContractAddress, amount: u256) -> Array<felt252> {
    let mut calldata = array![];
    calldata.append_serde(recipient);
    calldata.append_serde(amount);
    calldata
}
```

Note that the `append_serde` method is automatically available for arrays of felts, and it accepts any data structure that implements the `Serde` trait.

## [](#cryptography_2)Cryptography

### [](#NoncesComponent)`NoncesComponent`

```rust
use openzeppelin_utils::cryptography::nonces::NoncesComponent;
```

This component provides a simple mechanism for handling incremental nonces for a set of addresses. It is commonly used to prevent replay attacks when contracts accept signatures as input.

Embeddable Implementations

NoncesImpl

- [`nonces(self, owner)`](#NoncesComponent-nonces)

Internal Implementations

InternalImpl

- [`use_nonce(self, owner)`](#NoncesComponent-use_nonce)
- [`use_checked_nonce(self, owner, nonce)`](#NoncesComponent-use_checked_nonce)

#### [](#NoncesComponent-Embeddable-Functions)Embeddable functions

#### [](#NoncesComponent-nonces)`nonces(self: @ContractState, owner: ContractAddress) → felt252` external

Returns the next unused nonce for an `owner`.

#### [](#NoncesComponent-Internal-Functions)Internal functions

#### [](#NoncesComponent-use_nonce)`use_nonce(ref self: ComponentState, owner: ContractAddress) → felt252` internal

Consumes a nonce, returns the current value, and increments nonce.

For each account, the nonce has an initial value of 0, can only be incremented by one, and cannot be decremented or reset. This guarantees that the nonce never overflows.

#### [](#NoncesComponent-use_checked_nonce)`use_checked_nonce(ref self: ComponentState, owner: ContractAddress, nonce: felt252) → felt252` internal

Same as `use_nonce` but checking that `nonce` is the next valid one for `owner`.

### [](#snip12)`snip12`

```rust
use openzeppelin_utils::snip12;
```

Supports on-chain generation of message hashes compliant with [SNIP12](https://github.com/starknet-io/SNIPs/blob/main/SNIPS/snip-12.md).

For a full walkthrough on how to use this module, see the [SNIP12 and Typed Messages](../guides/snip12) guide.
